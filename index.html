<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="siteTitle">Nehemia Ministry Kenya - Digital Sanctuary of Faith, Hope, and Transformation</title>
    <meta name="description" data-lang-key="siteDescription" content="Welcome to Nehemia Ministry Kenya, a Christ-centered organization dedicated to spreading the Gospel, nurturing believers, and serving the community. Explore our ministries, sermons, events, and join our transformative journey.">
    <meta name="keywords" content="Nehemia Ministry Kenya, Church in Kenya, Bishop David Walukhu, Christian Ministry, Gospel, Faith, Hope, Transformation, Mukhonje, Kakamega, Bible School, Orphanage, Mission Hospital">
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">


    <style>
        :root {
            --primary-deep-blue: #0A2463; /* Example: Deep Blue */
            --secondary-amber: #FFC107; /* Example: Amber/Gold */
            --accent-green: #28a745;    /* Example: Hopeful Green */
            --light-bg: #F8F9FA;
            --dark-bg: #1A202C; /* For dark mode */
            --text-light: #E2E8F0;
            --text-dark: #2D3748;
        }

        body {
            font-family: 'Poppins', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        .font-playfair { font-family: 'Playfair Display', serif; }

        .dark body {
            background-color: var(--dark-bg);
            color: var(--text-light);
        }
        .dark .bg-white { background-color: #2D3748; /* Darker shade for white elements */ }
        .dark .text-gray-900 { color: var(--text-light); }
        .dark .text-gray-700 { color: #A0AEC0; } /* Lighter gray for dark mode */
        .dark .text-gray-600 { color: #CBD5E0; }
        .dark .text-gray-500 { color: #A0AEC0; }
        .dark .border-gray-200 { border-color: #4A5568; }
        .dark .border-gray-300 { border-color: #4A5568; }
        .dark .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.25); }
        .dark .bg-gray-50 { background-color: #252d3a; }
        .dark .bg-sky-50 { background-color: #0e2a47; }
        .dark .text-sky-700 { color: #75c6f0; }
        .dark .text-sky-600 { color: #8cd2f2; }
        .dark .bg-amber-500 { background-color: #D69E2E; } /* Darker Amber */
        .dark .hover\:bg-amber-600:hover { background-color: #B7791F; }
        .dark .text-amber-600 { color: #F6E05E; } /* Lighter Amber */
        .dark .bg-green-50 { background-color: #1c3b30; }
        .dark .text-green-700 { color: #68D391; }
        .dark .bg-indigo-100 { background-color: #2a2c57;}
        .dark .bg-sky-100 { background-color: #1e3a56;}
        .dark .from-sky-100 { --tw-gradient-from: #1e3a56 var(--tw-gradient-from-position); --tw-gradient-to: rgba(30,58,86,0) var(--tw-gradient-to-position); }
        .dark .to-indigo-100 { --tw-gradient-to: #2a2c57 var(--tw-gradient-to-position); }
        .dark .dark\:from-slate-800 { --tw-gradient-from: #1e293b var(--tw-gradient-from-position)!important; --tw-gradient-to: rgba(30,41,59,0) var(--tw-gradient-to-position)!important; }
        .dark .dark\:to-slate-900 { --tw-gradient-to: #0f172a var(--tw-gradient-to-position)!important; }
        .dark .dark\:bg-slate-700 { background-color: #334155 !important; }
        .dark .dark\:bg-slate-800 { background-color: #1e293b !important; }
        .dark .dark\:border-gray-600 { border-color: #4b5563 !important; }
        .dark .dark\:text-white { color: #fff !important; }
        .dark .dark\:text-gray-300 { color: #d1d5db !important; }
        .dark .dark\:text-gray-400 { color: #9ca3af !important; }


        /* Navbar fixed top adjustment */
        .pt-navbar { padding-top: 64px; /* Adjust if navbar height changes */ }

        /* Scripture Slider */
        .scripture-slide { display: none; }
        .scripture-slide.active { display: block; animation: fadeIn 1s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Preloader */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .dark #preloader { background-color: var(--dark-bg); }
        #preloader p { font-size: 1.2rem; color: var(--primary-deep-blue); margin-top: 10px; }
        .dark #preloader p { color: var(--text-light); }


        /* Floating WhatsApp Button */
        .whatsapp-float {
            position: fixed;
            width: 60px;
            height: 60px;
            bottom: 40px;
            right: 40px;
            background-color: #25d366;
            color: #FFF;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 2px 2px 3px #999;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .whatsapp-float:hover {
            background-color: #128C7E;
        }

        /* Scroll to Top Button */
        #scrollTopBtn {
            position: fixed;
            bottom: 110px; /* Position above WhatsApp button */
            right: 40px;
            background-color: var(--secondary-amber);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            display: none; /* Hidden by default */
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.3s, opacity 0.3s, visibility 0.3s;
        }
        #scrollTopBtn:hover {
            background-color: #d4a006; /* Darker amber */
        }
        .dark #scrollTopBtn { background-color: #D69E2E; }
        .dark #scrollTopBtn:hover { background-color: #B7791F; }

        /* Modal styles */
        .modal {
            transition: opacity 0.25s ease;
        }
        .modal-active {
            overflow-x: hidden;
            overflow-y: auto;
        }
        .modal-content {
            transition: transform 0.25s ease;
        }

        /* Testimonial Carousel */
        .testimonial-carousel .keen-slider__slide {
            min-height: 250px; /* Adjust as needed */
        }

        /* Event Countdown */
        .countdown-item {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            margin: 0 0.25rem;
            min-width: 70px;
        }
        .dark .countdown-item {
            background: rgba(0, 0, 0, 0.2);
        }

        /* Custom scrollbar for chat window */
        #chat-window::-webkit-scrollbar {
            width: 8px;
        }
        #chat-window::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .dark #chat-window::-webkit-scrollbar-track {
            background: #2d3748;
        }
        #chat-window::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .dark #chat-window::-webkit-scrollbar-thumb {
            background: #555;
        }
        #chat-window::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        .dark #chat-window::-webkit-scrollbar-thumb:hover {
            background: #333;
        }
        
        /* Ensure modals are on top */
        .fixed.inset-0.z-50 { z-index: 5000 !important; }

    </style>
</head>
<body class="bg-gray-100 text-gray-900 pt-navbar">

    <div id="preloader">
        <lottie-player src="https://assets10.lottiefiles.com/packages/lf20_kxsd2ytq.json" background="transparent" speed="1" style="width: 200px; height: 200px;" loop autoplay></lottie-player>
        <p data-lang-key="loading">Loading Digital Sanctuary...</p>
    </div>

    <nav class="bg-white dark:bg-gray-800 shadow-md fixed top-0 left-0 right-0 z-40 transition-colors duration-300">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <a href="#" class="flex-shrink-0">
                        <img class="h-10 w-auto" src="https://placehold.co/150x50/0A2463/FFFFFF?text=NMK+Logo" alt="Nehemia Ministry Kenya Logo">
                    </a>
                </div>
                <div class="hidden md:block">
                    <div id="navbar-links" class="ml-10 flex items-baseline space-x-4">
                        <a href="#hero" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150" data-lang-key="navHome">Home</a>
                        <a href="#about" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150" data-lang-key="navAbout">About Us</a>
                        <a href="#ministries" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150" data-lang-key="navMinistries">Ministries</a>
                        <a href="#sermons" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150" data-lang-key="navSermons">Sermons</a>
                        <a href="#events" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150" data-lang-key="navEvents">Events</a>
                        <a href="#prayer-wall" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150" data-lang-key="navPrayer">Prayer Wall</a>
                        <a href="#contact" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150" data-lang-key="navContact">Contact</a>
                        <a href="#admin" id="adminLink" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-red-500 dark:hover:text-red-400 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150" data-lang-key="navAdmin">Admin</a>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="relative ml-3">
                        <select id="languageSelector" class="block appearance-none w-full bg-gray-200 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300 py-2 px-3 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white dark:focus:bg-gray-600 focus:border-gray-500 text-sm">
                            <option value="en">English</option>
                            <option value="sw">Kiswahili</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                        </div>
                    </div>
                    <button id="darkModeToggle" class="ml-3 p-2 rounded-md text-gray-500 dark:text-gray-400 hover:text-amber-500 dark:hover:text-amber-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none">
                        <i class="fas fa-moon"></i> </button>
                    <div id="google_translate_element" class="ml-2"></div>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button type="button" id="mobileMenuButton" class="bg-gray-100 dark:bg-gray-700 inline-flex items-center justify-center p-2 rounded-md text-gray-500 dark:text-gray-400 hover:text-amber-500 dark:hover:text-amber-400 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-amber-500" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
        <div class="md:hidden hidden" id="mobile-menu">
            <div id="mobile-navbar-links" class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#hero" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 block px-3 py-2 rounded-md text-base font-medium transition-colors duration-150" data-lang-key="navHome">Home</a>
                <a href="#about" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 block px-3 py-2 rounded-md text-base font-medium transition-colors duration-150" data-lang-key="navAbout">About Us</a>
                <a href="#ministries" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 block px-3 py-2 rounded-md text-base font-medium transition-colors duration-150" data-lang-key="navMinistries">Ministries</a>
                <a href="#sermons" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 block px-3 py-2 rounded-md text-base font-medium transition-colors duration-150" data-lang-key="navSermons">Sermons</a>
                <a href="#events" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 block px-3 py-2 rounded-md text-base font-medium transition-colors duration-150" data-lang-key="navEvents">Events</a>
                <a href="#prayer-wall" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 block px-3 py-2 rounded-md text-base font-medium transition-colors duration-150" data-lang-key="navPrayer">Prayer Wall</a>
                <a href="#contact" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-amber-500 dark:hover:text-amber-400 block px-3 py-2 rounded-md text-base font-medium transition-colors duration-150" data-lang-key="navContact">Contact</a>
                <a href="#admin" id="mobileAdminLink" class="text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-red-500 dark:hover:text-red-400 block px-3 py-2 rounded-md text-base font-medium transition-colors duration-150" data-lang-key="navAdmin">Admin</a>
            </div>
        </div>
    </nav>

    <section id="hero" class="relative bg-gradient-to-br from-sky-600 via-blue-700 to-indigo-900 text-white min-h-screen flex items-center justify-center overflow-hidden" style="background-image: url('https://placehold.co/1920x1080/0A2463/FFFFFF?text=Ministry+Background'); background-size:cover; background-position:center;">
        <div class="absolute inset-0 bg-black opacity-50"></div> <div class="relative z-10 container mx-auto px-4 text-center py-20" data-aos="fade-up">
            <h1 id="dynamicGreeting" class="text-5xl md:text-7xl font-bold mb-4 font-playfair" data-lang-key="heroGreeting">Karibu Sana!</h1>
            <p class="text-xl md:text-2xl mb-6" data-lang-key="heroSubtitle">Embark on a transformative journey with Nehemia Ministry Kenya.</p>

            <div id="scriptureSlider" class="my-8 p-6 bg-white bg-opacity-20 backdrop-filter backdrop-blur-lg rounded-xl shadow-lg max-w-2xl mx-auto">
                <div class="scripture-slide active">
                    <p class="text-lg md:text-xl italic">"For I know the plans I have for you,” declares the LORD, “plans to prosper you and not to harm you, plans to give you hope and a future."</p>
                    <p class="text-md mt-2">Jeremiah 29:11</p>
                </div>
                <div class="scripture-slide">
                    <p class="text-lg md:text-xl italic">"The LORD is my shepherd, I lack nothing."</p>
                    <p class="text-md mt-2">Psalm 23:1</p>
                </div>
                <div class="scripture-slide">
                    <p class="text-lg md:text-xl italic">"I can do all this through him who gives me strength."</p>
                    <p class="text-md mt-2">Philippians 4:13</p>
                </div>
            </div>

            <a href="#about" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 px-8 rounded-lg text-lg transition duration-300 shadow-md hover:shadow-xl transform hover:scale-105" data-lang-key="heroCTA">Discover Our Story</a>
        </div>
    </section>

    <section id="word-of-the-day" class="py-12 bg-white dark:bg-slate-800">
        <div class="container mx-auto px-4 text-center">
            <h3 class="text-3xl font-semibold text-amber-600 dark:text-amber-400 mb-2 font-playfair" data-lang-key="wordOfTheDayTitle">Word of the Day</h3>
            <div id="dailyWordContainer" class="p-6 bg-sky-50 dark:bg-sky-900 rounded-lg shadow-md inline-block" data-aos="fade-up">
                <p id="dailyScripture" class="text-xl md:text-2xl text-sky-700 dark:text-sky-300 italic">"For God so loved the world..."</p>
                <p id="dailyCitation" class="text-md text-sky-600 dark:text-sky-400 mt-1">John 3:16</p>
                <button id="explainVerseBtn" class="mt-4 bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-150 text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg>
                    <span data-lang-key="explainVerseBtnText">Explain Verse (AI)</span>
                </button>
            </div>
            <div id="verseExplanation" class="mt-4 p-4 bg-green-50 dark:bg-green-900 rounded-lg shadow-sm text-green-700 dark:text-green-200 max-w-2xl mx-auto hidden">
                </div>
            <div id="verse-explainer-loading-indicator" class="mt-3 text-center hidden">
                <svg class="animate-spin h-6 w-6 text-green-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1" data-lang-key="explainVerseLoading">Getting AI explanation...</p>
            </div>
        </div>
    </section>

    <section id="about" class="py-16 bg-gray-50 dark:bg-gray-900">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="aboutTitle">About Nehemia Ministry</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="aboutSubtitle">A Legacy of Faith, A Future of Hope.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div data-aos="fade-right">
                    <img src="https://placehold.co/600x400/0A2463/FFFFFF?text=Ministry+Founders" alt="Bishop David & Rev. Selina Walukhu" class="rounded-lg shadow-xl">
                </div>
                <div data-aos="fade-left">
                    <h3 class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-3" data-lang-key="aboutFoundersTitle">Our Journey & Vision</h3>
                    <p class="text-gray-700 dark:text-gray-300 mb-4" data-lang-key="aboutIntro">
                        Founded in 2006 by Bishop David Walukhu and Reverend Selina Walukhu, Nehemia Ministry Kenya began with a divine calling in Mukhonje Village, Kakamega County. From humble beginnings under a tree, our mission has always been to spread the Gospel, nurture believers, and demonstrate God's love through holistic community service.
                    </p>
                    <p class="text-gray-700 dark:text-gray-300 mb-6" data-lang-key="aboutMission">
                        We are committed to being a beacon of hope, transforming lives spiritually, physically, and emotionally, guided by the teachings of Jesus Christ.
                    </p>
                    <a href="about-full.html" class="inline-block bg-sky-600 hover:bg-sky-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-150 shadow-md hover:shadow-lg" data-lang-key="aboutLearnMore">Learn More About Us</a>
                </div>
            </div>
        </div>
    </section>

    <section id="ministries" class="py-16 bg-white dark:bg-slate-800">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="ministriesTitle">Pillars of Our Ministry</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="ministriesSubtitle">Serving God, Serving Humanity.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-gray-50 dark:bg-gray-700 p-8 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300" data-aos="fade-up" data-aos-delay="100">
                    <div class="text-amber-500 dark:text-amber-400 mb-4 text-4xl"><i class="fas fa-hospital-user"></i></div>
                    <h3 class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-3" data-lang-key="ministryHospitalTitle">Kingdom Faith-Based Mission Hospital</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4" data-lang-key="ministryHospitalDesc">Providing compassionate and holistic healthcare, addressing physical, spiritual, and emotional well-being.</p>
                    <a href="hospital.html" class="text-sky-600 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-200 font-semibold" data-lang-key="learnMore">Learn More <i class="fas fa-arrow-right ml-1"></i></a>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-8 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300" data-aos="fade-up" data-aos-delay="200">
                    <div class="text-amber-500 dark:text-amber-400 mb-4 text-4xl"><i class="fas fa-bible"></i></div>
                    <h3 class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-3" data-lang-key="ministrySchoolTitle">Matco Training Institute (Bible School)</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4" data-lang-key="ministrySchoolDesc">Equipping clergy, lay leaders, and believers with sound biblical knowledge and practical ministry skills.</p>
                    <a href="bible-school.html" class="text-sky-600 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-200 font-semibold" data-lang-key="learnMore">Learn More <i class="fas fa-arrow-right ml-1"></i></a>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-8 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300" data-aos="fade-up" data-aos-delay="300">
                    <div class="text-amber-500 dark:text-amber-400 mb-4 text-4xl"><i class="fas fa-child"></i></div>
                    <h3 class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-3" data-lang-key="ministryOrphanageTitle">New Promise Home (Orphanage)</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4" data-lang-key="ministryOrphanageDesc">Offering a loving, Christ-centered home for vulnerable children, providing care, education, and spiritual nurturing.</p>
                    <a href="orphanage.html" class="text-sky-600 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-200 font-semibold" data-lang-key="learnMore">Learn More <i class="fas fa-arrow-right ml-1"></i></a>
                </div>
            </div>
        </div>
    </section>

    <section id="sermons" class="py-16 bg-gray-50 dark:bg-gray-900">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="sermonsTitle">Nourishment for the Soul</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="sermonsSubtitle">Recent messages from our ministry leaders.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden" data-aos="zoom-in-up">
                    <img src="https://placehold.co/600x400/FFC107/000000?text=Sermon+Art" alt="Sermon Title" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2" data-lang-key="sermon1Title">The Power of Unwavering Faith</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-1" data-lang-key="sermon1Speaker">Bishop David Walukhu</p>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-3" data-lang-key="sermon1Date">May 19, 2024</p>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4" data-lang-key="sermon1Desc">Discover how steadfast faith can move mountains in your life. An inspiring message on trusting God through all seasons.</p>
                        <div class="flex items-center justify-between">
                            <button class="sermon-listen-btn text-sky-600 dark:text-sky-400 hover:underline text-sm" data-sermon-audio="path/to/sermon1.mp3" data-sermon-title="The Power of Unwavering Faith" data-sermon-speaker="Bishop David Walukhu" data-sermon-transcript="Detailed transcript here or link...">
                                <i class="fas fa-play-circle mr-1"></i> <span data-lang-key="listenNow">Listen Now</span>
                            </button>
                            <button class="sermon-details-btn text-amber-600 dark:text-amber-400 hover:underline text-sm" data-sermon-title="The Power of Unwavering Faith" data-sermon-speaker="Bishop David Walukhu" data-sermon-date="May 19, 2024" data-sermon-desc="Discover how steadfast faith can move mountains in your life. An inspiring message on trusting God through all seasons. Lorem ipsum dolor sit amet, consectetur adipiscing elit..." data-sermon-video="https://www.youtube.com/embed/dQw4w9WgXcQ">
                                <span data-lang-key="viewDetails">View Details</span> <i class="fas fa-info-circle ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden" data-aos="zoom-in-up" data-aos-delay="100">
                    <img src="https://placehold.co/600x400/0A2463/FFFFFF?text=Sermon+Rev+Selina" alt="Sermon Title" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2" data-lang-key="sermon2Title">Living a Life of Purpose</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-1" data-lang-key="sermon2Speaker">Rev. Selina Walukhu</p>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-3" data-lang-key="sermon2Date">May 12, 2024</p>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4" data-lang-key="sermon2Desc">Explore God's unique plan for your life and how to walk in your divine calling with joy and confidence.</p>
                         <div class="flex items-center justify-between">
                            <button class="sermon-listen-btn text-sky-600 dark:text-sky-400 hover:underline text-sm" data-sermon-audio="path/to/sermon2.mp3" data-sermon-title="Living a Life of Purpose" data-sermon-speaker="Rev. Selina Walukhu" data-sermon-transcript="Detailed transcript for sermon 2...">
                                <i class="fas fa-play-circle mr-1"></i> <span data-lang-key="listenNow">Listen Now</span>
                            </button>
                            <button class="sermon-details-btn text-amber-600 dark:text-amber-400 hover:underline text-sm" data-sermon-title="Living a Life of Purpose" data-sermon-speaker="Rev. Selina Walukhu" data-sermon-date="May 12, 2024" data-sermon-desc="Explore God's unique plan for your life and how to walk in your divine calling with joy and confidence. Lorem ipsum dolor sit amet..." data-sermon-video="">
                                <span data-lang-key="viewDetails">View Details</span> <i class="fas fa-info-circle ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
                 <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden" data-aos="zoom-in-up" data-aos-delay="200">
                    <img src="https://placehold.co/600x400/28a745/FFFFFF?text=Guest+Speaker" alt="Sermon Title" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2" data-lang-key="sermon3Title">The Joy of Giving</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-1" data-lang-key="sermon3Speaker">Guest Speaker</p>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-3" data-lang-key="sermon3Date">May 5, 2024</p>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4" data-lang-key="sermon3Desc">Understanding the biblical principles of stewardship and the blessings that come from a generous heart.</p>
                         <div class="flex items-center justify-between">
                             <button class="sermon-listen-btn text-sky-600 dark:text-sky-400 hover:underline text-sm" data-sermon-audio="path/to/sermon3.mp3" data-sermon-title="The Joy of Giving" data-sermon-speaker="Guest Speaker" data-sermon-transcript="Detailed transcript for sermon 3...">
                                <i class="fas fa-play-circle mr-1"></i> <span data-lang-key="listenNow">Listen Now</span>
                            </button>
                            <button class="sermon-details-btn text-amber-600 dark:text-amber-400 hover:underline text-sm" data-sermon-title="The Joy of Giving" data-sermon-speaker="Guest Speaker" data-sermon-date="May 5, 2024" data-sermon-desc="Understanding the biblical principles of stewardship and the blessings that come from a generous heart. Lorem ipsum dolor sit amet..." data-sermon-video="https://www.youtube.com/embed/anotherVideoID">
                                <span data-lang-key="viewDetails">View Details</span> <i class="fas fa-info-circle ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center mt-12">
                <a href="sermons-archive.html" class="inline-block bg-amber-500 hover:bg-amber-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-150 shadow-md hover:shadow-lg" data-lang-key="sermonsViewAll">View All Sermons</a>
            </div>
        </div>
    </section>

    <section id="events" class="py-16 bg-white dark:bg-slate-800">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="eventsTitle">Upcoming Gatherings</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="eventsSubtitle">Join us for fellowship, worship, and growth.</p>
            </div>

            <div class="bg-gradient-to-r from-sky-500 to-indigo-600 dark:from-sky-700 dark:to-indigo-800 text-white p-8 md:p-12 rounded-xl shadow-2xl mb-12" data-aos="flip-left">
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-3xl font-bold mb-3" data-lang-key="featuredEventTitle">Annual Youth Conference 2024</h3>
                        <p class="text-lg mb-1"><i class="fas fa-calendar-alt mr-2"></i> <span data-lang-key="featuredEventDate">August 15-18, 2024</span></p>
                        <p class="text-lg mb-4"><i class="fas fa-map-marker-alt mr-2"></i> <span data-lang-key="featuredEventLocation">NMK Mukhonje HQ, Kakamega</span></p>
                        <p class="mb-6" data-lang-key="featuredEventDesc">A power-packed conference for young people! Theme: "Ignited for Purpose". Expect dynamic speakers, worship, workshops, and fun activities.</p>
                        <a href="event-details.html?id=youth-conf-2024" class="bg-amber-400 hover:bg-amber-500 text-gray-900 font-bold py-3 px-6 rounded-lg transition duration-150 shadow-md hover:shadow-lg" data-lang-key="learnMore">Learn More & Register</a>
                    </div>
                    <div class="text-center">
                        <h4 class="text-2xl font-semibold mb-4" data-lang-key="countdownTitle">Countdown to Event:</h4>
                        <div id="eventCountdown" class="flex justify-center text-2xl md:text-3xl font-bold">
                            <div class="countdown-item"><span id="days">00</span><p class="text-xs font-normal" data-lang-key="countdownDays">Days</p></div>
                            <div class="countdown-item"><span id="hours">00</span><p class="text-xs font-normal" data-lang-key="countdownHours">Hours</p></div>
                            <div class="countdown-item"><span id="minutes">00</span><p class="text-xs font-normal" data-lang-key="countdownMinutes">Minutes</p></div>
                            <div class="countdown-item"><span id="seconds">00</span><p class="text-xs font-normal" data-lang-key="countdownSeconds">Seconds</p></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg shadow-lg overflow-hidden" data-aos="fade-up">
                    <img src="https://placehold.co/600x400/28a745/FFFFFF?text=Event+Community+Outreach" alt="Community Outreach" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2" data-lang-key="event1Title">Community Outreach Program</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-1"><i class="fas fa-calendar-alt mr-1"></i> <span data-lang-key="event1Date">June 22, 2024</span></p>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-3"><i class="fas fa-map-marker-alt mr-1"></i> <span data-lang-key="event1Location">Kibera, Nairobi</span></p>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4" data-lang-key="event1Desc">Join us as we share God's love through food distribution, health checks, and prayer.</p>
                        <a href="event-details.html?id=community-outreach-jun24" class="text-sky-600 dark:text-sky-400 hover:underline font-semibold text-sm" data-lang-key="learnMore">More Info <i class="fas fa-arrow-right ml-1"></i></a>
                    </div>
                </div>
                </div>
            <div class="text-center mt-12">
                <a href="events-calendar.html" class="inline-block bg-sky-600 hover:bg-sky-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-150 shadow-md hover:shadow-lg" data-lang-key="eventsViewCalendar">View Full Calendar</a>
            </div>
        </div>
    </section>

    <section id="prayer-wall" class="py-16 bg-gray-50 dark:bg-gray-900">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="prayerTitle">The Prayer Wall</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="prayerSubtitle">United in prayer, strengthened by faith. Share your requests and pray for others.</p>
            </div>
            <div class="max-w-4xl mx-auto bg-white dark:bg-gray-800 p-8 rounded-xl shadow-xl">
                <form id="prayerRequestForm" class="mb-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="prayerName" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-lang-key="prayerNameLabel">Your Name (Optional)</label>
                            <input type="text" name="prayerName" id="prayerName" class="mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm" data-lang-key-placeholder="prayerNamePlaceholder" placeholder="Enter your name">
                        </div>
                        <div>
                            <label for="prayerType" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-lang-key="prayerTypeLabel">Prayer Type</label>
                            <select id="prayerType" name="prayerType" class="mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm">
                                <option value="healing" data-lang-key="prayerTypeHealing">Healing</option>
                                <option value="guidance" data-lang-key="prayerTypeGuidance">Guidance</option>
                                <option value="thanksgiving" data-lang-key="prayerTypeThanksgiving">Thanksgiving</option>
                                <option value="family" data-lang-key="prayerTypeFamily">Family</option>
                                <option value="other" data-lang-key="prayerTypeOther">Other</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="prayerRequest" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-lang-key="prayerRequestLabel">Your Prayer Request</label>
                        <textarea id="prayerRequest" name="prayerRequest" rows="4" required class="mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm" data-lang-key-placeholder="prayerRequestPlaceholder" placeholder="Share your prayer request here..."></textarea>
                    </div>
                    <div class="mt-6 text-right">
                        <button type="submit" class="inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500" data-lang-key="prayerSubmitBtn">Submit Request</button>
                    </div>
                </form>
                <div id="prayerWallDisplay" class="space-y-4 max-h-96 overflow-y-auto pr-2">
                    <div class="p-4 bg-sky-50 dark:bg-sky-900 rounded-lg shadow-sm">
                        <p class="text-gray-700 dark:text-gray-200 text-sm">"Please pray for my family's health and protection." - <span class="font-semibold">Anonymous</span> (<span data-lang-key="prayerTypeFamily">Family</span>)</p>
                        <button class="text-xs text-sky-600 dark:text-sky-400 mt-1 hover:underline prayed-for-btn"><i class="fas fa-hands-praying mr-1"></i> <span data-lang-key="prayerIntercede">I prayed for this</span> (<span class="prayed-count">5</span>)</button>
                    </div>
                     <div class="p-4 bg-sky-50 dark:bg-sky-900 rounded-lg shadow-sm">
                        <p class="text-gray-700 dark:text-gray-200 text-sm">"Grateful for a successful surgery. Thank you, Lord!" - <span class="font-semibold">Mary W.</span> (<span data-lang-key="prayerTypeThanksgiving">Thanksgiving</span>)</p>
                        <button class="text-xs text-sky-600 dark:text-sky-400 mt-1 hover:underline prayed-for-btn"><i class="fas fa-hands-praying mr-1"></i> <span data-lang-key="prayerIntercede">I prayed for this</span> (<span class="prayed-count">12</span>)</button>
                    </div>
                </div>
            </div>
            <div class="text-center mt-8">
                 <a href="prayer-wall-full.html" class="text-sky-600 dark:text-sky-400 hover:underline font-semibold" data-lang-key="prayerVisitFull">Visit Full Prayer Wall</a>
            </div>
        </div>
    </section>

    <section id="gallery" class="py-16 bg-white dark:bg-slate-800">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="galleryTitle">Capturing Grace</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="gallerySubtitle">A visual journey of our ministry's life and impact.</p>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <div class="overflow-hidden rounded-lg shadow-md cursor-pointer" data-aos="zoom-in" onclick="openImageModal('https://placehold.co/800x600/0A2463/FFFFFF?text=Ministry+Event+1', 'Community Outreach Event')">
                    <img src="https://placehold.co/400x300/0A2463/FFFFFF?text=Ministry+Event+1" alt="Ministry Event 1" class="w-full h-full object-cover transform hover:scale-110 transition-transform duration-300">
                </div>
                <div class="overflow-hidden rounded-lg shadow-md cursor-pointer" data-aos="zoom-in" data-aos-delay="50" onclick="openImageModal('https://placehold.co/800x600/FFC107/000000?text=Children+at+Orphanage', 'Children at New Promise Home')">
                    <img src="https://placehold.co/400x300/FFC107/000000?text=Children+at+Orphanage" alt="Children at New Promise Home" class="w-full h-full object-cover transform hover:scale-110 transition-transform duration-300">
                </div>
                <div class="overflow-hidden rounded-lg shadow-md cursor-pointer" data-aos="zoom-in" data-aos-delay="100" onclick="openImageModal('https://placehold.co/800x600/28a745/FFFFFF?text=Bible+School+Students', 'Matco Training Institute Students')">
                    <img src="https://placehold.co/400x300/28a745/FFFFFF?text=Bible+School+Students" alt="Matco Training Institute Students" class="w-full h-full object-cover transform hover:scale-110 transition-transform duration-300">
                </div>
                <div class="overflow-hidden rounded-lg shadow-md cursor-pointer" data-aos="zoom-in" data-aos-delay="150" onclick="openImageModal('https://placehold.co/800x600/E83E8C/FFFFFF?text=Worship+Session', 'Worship Session')">
                    <img src="https://placehold.co/400x300/E83E8C/FFFFFF?text=Worship+Session" alt="Worship Session" class="w-full h-full object-cover transform hover:scale-110 transition-transform duration-300">
                </div>
                </div>
            <div class="text-center mt-12">
                <a href="gallery-full.html" class="inline-block bg-amber-500 hover:bg-amber-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-150 shadow-md hover:shadow-lg" data-lang-key="galleryViewAll">View Full Gallery</a>
            </div>
        </div>
    </section>

    <section id="testimonials" class="py-16 bg-gray-50 dark:bg-gray-900">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="testimonialsTitle">Echoes of Transformation</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="testimonialsSubtitle">Lives touched by the grace of God through Nehemia Ministry.</p>
            </div>
            <div id="testimonialCarousel" class="keen-slider">
                <div class="keen-slider__slide bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg" data-aos="fade-up">
                    <div class="flex items-center mb-4">
                        <img src="https://placehold.co/80x80/0A2463/FFFFFF?text=JN" alt="John N." class="w-16 h-16 rounded-full mr-4">
                        <div>
                            <h4 class="font-semibold text-lg text-gray-800 dark:text-gray-100" data-lang-key="testimonial1Name">John N.</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400" data-lang-key="testimonial1Role">Community Member</p>
                        </div>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 italic">"Nehemia Ministry has been a true blessing to my family. The teachings have strengthened our faith, and the community support is incredible. The hospital provided excellent care when my child was sick."</p>
                </div>
                <div class="keen-slider__slide bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg" data-aos="fade-up" data-aos-delay="100">
                    <div class="flex items-center mb-4">
                        <img src="https://placehold.co/80x80/FFC107/000000?text=ES" alt="Esther S." class="w-16 h-16 rounded-full mr-4">
                        <div>
                            <h4 class="font-semibold text-lg text-gray-800 dark:text-gray-100" data-lang-key="testimonial2Name">Esther S.</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400" data-lang-key="testimonial2Role">Bible School Graduate</p>
                        </div>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 italic">"Attending Matco Training Institute was a life-changing experience. I feel equipped and empowered to serve God more effectively in my local church. The depth of teaching was phenomenal."</p>
                </div>
                <div class="keen-slider__slide bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg" data-aos="fade-up" data-aos-delay="200">
                    <div class="flex items-center mb-4">
                        <img src="https://placehold.co/80x80/28a745/FFFFFF?text=PO" alt="Peter O." class="w-16 h-16 rounded-full mr-4">
                        <div>
                            <h4 class="font-semibold text-lg text-gray-800 dark:text-gray-100" data-lang-key="testimonial3Name">Peter O.</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400" data-lang-key="testimonial3Role">Volunteer</p>
                        </div>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 italic">"Volunteering at New Promise Home has filled my heart with so much joy. Seeing the impact on the children's lives firsthand is a powerful reminder of God's love and the importance of this ministry."</p>
                </div>
            </div>
             <div class="text-center mt-8">
                 <a href="submit-testimonial.html" class="text-sky-600 dark:text-sky-400 hover:underline font-semibold" data-lang-key="testimonialSubmit">Share Your Story</a>
            </div>
        </div>
    </section>

    <section id="church-network" class="py-16 bg-white dark:bg-slate-800">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="networkTitle">Our Growing Church Network</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="networkSubtitle">Spreading the light of the Gospel across Kenya.</p>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300" data-aos="fade-up">
                    <h3 class="text-xl font-semibold text-sky-700 dark:text-sky-300 mb-2" data-lang-key="branchMukhonje">Mukhonje (HQ)</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm" data-lang-key="branchMukhonjeDesc">The heart of Nehemia Ministry, Kakamega County.</p>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300" data-aos="fade-up" data-aos-delay="50">
                    <h3 class="text-xl font-semibold text-sky-700 dark:text-sky-300 mb-2" data-lang-key="branchNairobi">Nairobi Branch</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm" data-lang-key="branchNairobiDesc">Serving the vibrant community in the capital city.</p>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300" data-aos="fade-up" data-aos-delay="100">
                    <h3 class="text-xl font-semibold text-sky-700 dark:text-sky-300 mb-2" data-lang-key="branchMombasa">Mombasa Branch</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm" data-lang-key="branchMombasaDesc">Reaching souls in the coastal region.</p>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300" data-aos="fade-up" data-aos-delay="150">
                    <h3 class="text-xl font-semibold text-sky-700 dark:text-sky-300 mb-2" data-lang-key="branchKisumu">Kisumu Branch</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm" data-lang-key="branchKisumuDesc">Ministering in the lakeside city.</p>
                </div>
                 <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300" data-aos="fade-up" data-aos-delay="200">
                    <h3 class="text-xl font-semibold text-sky-700 dark:text-sky-300 mb-2" data-lang-key="branchNakuru">Nakuru Branch</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm" data-lang-key="branchNakuruDesc">Expanding our reach in the Rift Valley.</p>
                </div>
                 <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300" data-aos="fade-up" data-aos-delay="250">
                    <h3 class="text-xl font-semibold text-sky-700 dark:text-sky-300 mb-2" data-lang-key="branchEldoret">Eldoret Branch</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm" data-lang-key="branchEldoretDesc">Serving the City of Champions.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="leadership" class="py-16 bg-gray-50 dark:bg-gray-900">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="leadershipTitle">Meet Our Leaders</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="leadershipSubtitle">Guiding Nehemia Ministry with wisdom and passion.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center max-w-4xl mx-auto">
                <div class="text-center" data-aos="fade-right">
                    <img src="https://placehold.co/300x300/0A2463/FFFFFF?text=Bishop+David" alt="Bishop David Walukhu" class="w-48 h-48 md:w-60 md:h-60 rounded-full mx-auto mb-4 shadow-lg object-cover">
                    <h3 class="text-2xl font-semibold text-gray-800 dark:text-gray-100" data-lang-key="leader1Name">Bishop David Walukhu</h3>
                    <p class="text-amber-600 dark:text-amber-400" data-lang-key="leader1Role">Founder & Presiding Bishop</p>
                </div>
                <div class="text-center" data-aos="fade-left">
                    <img src="https://placehold.co/300x300/FFC107/000000?text=Rev+Selina" alt="Rev. Selina Walukhu" class="w-48 h-48 md:w-60 md:h-60 rounded-full mx-auto mb-4 shadow-lg object-cover">
                    <h3 class="text-2xl font-semibold text-gray-800 dark:text-gray-100" data-lang-key="leader2Name">Rev. Selina Walukhu</h3>
                    <p class="text-amber-600 dark:text-amber-400" data-lang-key="leader2Role">Co-Founder & Director of Ministries</p>
                </div>
            </div>
            <div class="text-center mt-10">
                <a href="leadership-full.html" class="text-sky-600 dark:text-sky-400 hover:underline font-semibold" data-lang-key="leadershipViewAll">View All Leaders</a>
            </div>
        </div>
    </section>

    <section id="blog" class="py-16 bg-white dark:bg-slate-800">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="blogTitle">Insights & Reflections</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="blogSubtitle">Latest articles and updates from our ministry.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg shadow-lg overflow-hidden" data-aos="fade-up">
                    <img src="https://placehold.co/600x400/0A2463/FFFFFF?text=Blog+Image+1" alt="Blog Post Title 1" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <p class="text-sm text-amber-600 dark:text-amber-400 mb-1" data-lang-key="blog1Category">Spiritual Growth</p>
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 hover:text-sky-600 dark:hover:text-sky-400 transition-colors"><a href="blog-post1.html" data-lang-key="blog1Title">The Importance of Daily Devotion</a></h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-3" data-lang-key="blog1AuthorDate">By Bishop David Walukhu | May 20, 2024</p>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4" data-lang-key="blog1Excerpt">Discover practical tips for establishing a meaningful daily quiet time with God...</p>
                        <a href="blog-post1.html" class="text-sky-600 dark:text-sky-400 hover:underline font-semibold text-sm" data-lang-key="readMore">Read More <i class="fas fa-arrow-right ml-1"></i></a>
                    </div>
                </div>
                </div>
            <div class="text-center mt-12">
                <a href="blog-archive.html" class="inline-block bg-sky-600 hover:bg-sky-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-150 shadow-md hover:shadow-lg" data-lang-key="blogViewAll">Visit Our Blog</a>
            </div>
        </div>
    </section>

    <section id="ai-assistant" class="py-16 bg-gradient-to-br from-sky-100 to-indigo-100 dark:from-slate-800 dark:to-slate-900">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="aiChatTitle">
                    Ask Imani: Your AI Spiritual Companion
                </h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="aiChatSubtitle">
                    Have questions about faith, scripture, or need a word of encouragement? Imani is here to help.
                </p>
                <p class="mt-2 text-sm text-gray-500 dark:text-gray-400" data-lang-key="aiChatDisclaimer">
                    <em>Imani is an AI assistant. For pastoral counseling, please connect with our ministry team.</em>
                </p>
            </div>

            <div class="max-w-3xl mx-auto bg-white dark:bg-slate-700 shadow-xl rounded-lg p-6" data-aos="fade-up">
                <div id="chat-window" class="h-96 overflow-y-auto mb-4 p-4 border border-gray-300 dark:border-gray-600 rounded-lg space-y-4 bg-gray-50 dark:bg-slate-800">
                    </div>
                <div class="flex gap-2">
                    <input type="text" id="chat-input" class="flex-grow p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-800 dark:text-white" data-lang-key-placeholder="aiChatPlaceholder" placeholder="Type your question here...">
                    <button id="send-chat-btn" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 px-6 rounded-lg transition duration-150">
                        <span data-lang-key="aiChatSend">Send</span> <i class="fas fa-paper-plane ml-2"></i>
                    </button>
                </div>
                 <div id="ai-loading-indicator" class="mt-4 text-center hidden">
                    <svg class="animate-spin h-8 w-8 text-amber-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="text-gray-600 dark:text-gray-300 mt-2" data-lang-key="aiChatThinking">Imani is thinking...</p>
                </div>
            </div>
        </div>
    </section>

    <section id="give" class="py-16 bg-green-50 dark:bg-green-900 text-green-800 dark:text-green-100">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div data-aos="fade-up">
                <h2 class="text-4xl font-bold tracking-tight sm:text-5xl font-playfair mb-6" data-lang-key="giveTitle">Partner With Us in Transformation</h2>
                <p class="mt-4 text-xl text-green-700 dark:text-green-200 mb-8 max-w-3xl mx-auto" data-lang-key="giveSubtitle">
                    Your generous support empowers us to continue spreading the Gospel, healing the sick, educating leaders, and caring for the vulnerable. Together, we can make a lasting impact.
                </p>
                <a href="donate.html" class="inline-block bg-amber-500 hover:bg-amber-600 text-white font-bold py-4 px-10 rounded-lg text-lg transition duration-300 shadow-md hover:shadow-xl transform hover:scale-105" data-lang-key="giveCTA">Give Securely Online</a>
                <p class="mt-6 text-sm text-green-600 dark:text-green-300" data-lang-key="giveOtherWays">
                    Other ways to give (M-Pesa, Bank Transfer) are detailed on our donations page.
                </p>
            </div>
        </div>
    </section>

    <section id="contact" class="py-16 bg-white dark:bg-slate-800">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12" data-aos="fade-down">
                <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl font-playfair" data-lang-key="contactTitle">Get In Touch</h2>
                <p class="mt-4 text-xl text-gray-600 dark:text-gray-300" data-lang-key="contactSubtitle">We'd love to hear from you. Connect with us today!</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                <div data-aos="fade-right">
                    <h3 class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-4" data-lang-key="contactDetailsTitle">Our Contact Details</h3>
                    <ul class="space-y-3 text-gray-700 dark:text-gray-300">
                        <li><i class="fas fa-map-marker-alt fa-fw mr-2 text-amber-500"></i> <strong data-lang-key="contactAddressLabel">Address:</strong> P.O. Box 123, Mukhonje, Kakamega, Kenya</li>
                        <li><i class="fas fa-phone-alt fa-fw mr-2 text-amber-500"></i> <strong data-lang-key="contactPhoneLabel">Phone:</strong> +254 7XX XXX XXX</li>
                        <li><i class="fas fa-envelope fa-fw mr-2 text-amber-500"></i> <strong data-lang-key="contactEmailLabel">Email:</strong> info@nehemiaministry.or.ke</li>
                        <li><i class="fas fa-clock fa-fw mr-2 text-amber-500"></i> <strong data-lang-key="contactHoursLabel">Office Hours:</strong> Mon - Fri, 9:00 AM - 5:00 PM</li>
                    </ul>
                    <div class="mt-6">
                        <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2" data-lang-key="contactSocialTitle">Follow Us:</h4>
                        <div class="flex space-x-4">
                            <a href="#" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 text-2xl"><i class="fab fa-facebook-square"></i></a>
                            <a href="#" class="text-pink-500 hover:text-pink-700 dark:text-pink-400 dark:hover:text-pink-200 text-2xl"><i class="fab fa-instagram-square"></i></a>
                            <a href="#" class="text-blue-400 hover:text-blue-600 dark:text-blue-300 dark:hover:text-blue-100 text-2xl"><i class="fab fa-twitter-square"></i></a>
                            <a href="#" class="text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200 text-2xl"><i class="fab fa-youtube-square"></i></a>
                        </div>
                    </div>
                </div>
                <div data-aos="fade-left" class="rounded-lg overflow-hidden shadow-xl">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d127672.00000000001!2d34.75000000000001!3d0.28333300000000005!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1781d4b24160876d%3A0x59f7a7a7e633453!2sKakamega!5e0!3m2!1sen!2ske!4v1684842000001" width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Google Map of Kakamega"></iframe>
                </div>
            </div>
        </div>
    </section>

    <section id="admin" class="py-16 bg-gray-200 dark:bg-gray-700 hidden">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-8 text-gray-800 dark:text-gray-100" data-lang-key="adminTitle">Admin Panel</h2>
            <div id="adminLogin" class="max-w-md mx-auto bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200" data-lang-key="adminLoginTitle">Admin Login</h3>
                <input type="password" id="adminPassword" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded mb-4 dark:bg-gray-700 dark:text-white" placeholder="Password">
                <button id="adminLoginBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white p-2 rounded" data-lang-key="login">Login</button>
                <p id="adminLoginError" class="text-red-500 text-sm mt-2"></p>
            </div>
            <div id="adminContent" class="hidden mt-8">
                <p class="text-center text-gray-700 dark:text-gray-200" data-lang-key="adminWelcome">Welcome, Admin! Content management features would go here.</p>
                <button id="adminLogoutBtn" class="block mx-auto mt-4 bg-red-500 hover:bg-red-600 text-white p-2 rounded" data-lang-key="logout">Logout</button>
            </div>
        </div>
    </section>

    <footer class="bg-gray-900 dark:bg-black text-gray-300 dark:text-gray-400 py-12">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
                <div>
                    <h5 class="text-lg font-semibold text-white mb-3" data-lang-key="footerAboutTitle">Nehemia Ministry Kenya</h5>
                    <p class="text-sm" data-lang-key="footerAboutText">A Christ-centered ministry committed to transforming lives and communities through the Gospel and compassionate service.</p>
                </div>
                <div>
                    <h5 class="text-lg font-semibold text-white mb-3" data-lang-key="footerQuickLinks">Quick Links</h5>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#about" class="hover:text-amber-400 transition-colors" data-lang-key="navAbout">About Us</a></li>
                        <li><a href="#ministries" class="hover:text-amber-400 transition-colors" data-lang-key="navMinistries">Our Ministries</a></li>
                        <li><a href="#sermons" class="hover:text-amber-400 transition-colors" data-lang-key="navSermons">Sermons</a></li>
                        <li><a href="donate.html" class="hover:text-amber-400 transition-colors" data-lang-key="giveCTA">Give Online</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="text-lg font-semibold text-white mb-3" data-lang-key="footerContactUs">Contact Us</h5>
                    <ul class="space-y-2 text-sm">
                        <li><i class="fas fa-map-marker-alt fa-fw mr-1"></i> Mukhonje, Kakamega</li>
                        <li><i class="fas fa-phone-alt fa-fw mr-1"></i> +254 7XX XXX XXX</li>
                        <li><i class="fas fa-envelope fa-fw mr-1"></i> info@nehemiaministry.or.ke</li>
                    </ul>
                </div>
                <div>
                    <h5 class="text-lg font-semibold text-white mb-3" data-lang-key="footerConnect">Connect With Us</h5>
                    <div class="flex space-x-3">
                        <a href="#" aria-label="Facebook" class="text-xl hover:text-amber-400 transition-colors"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram" class="text-xl hover:text-amber-400 transition-colors"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="Twitter" class="text-xl hover:text-amber-400 transition-colors"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="YouTube" class="text-xl hover:text-amber-400 transition-colors"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-8 text-center text-sm">
                <p>&copy; <span id="currentYear"></span> Nehemia Ministry Kenya. <span data-lang-key="footerRights">All Rights Reserved.</span></p>
                <p class="mt-1" data-lang-key="footerDevNote">Designed with <i class="fas fa-heart text-red-500"></i> by Your Name/Company</p>
            </div>
        </div>
    </footer>

    <div id="sermonModal" class="fixed inset-0 z-5000 flex items-center justify-center bg-black bg-opacity-75 p-4 hidden modal">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-2xl w-full mx-auto modal-content transform scale-95">
            <div class="flex justify-between items-center mb-4">
                <h3 id="sermonModalTitle" class="text-2xl font-semibold text-gray-800 dark:text-white font-playfair">Sermon Title</h3>
                <button id="closeSermonModal" class="text-gray-600 dark:text-gray-300 hover:text-red-500 text-2xl">&times;</button>
            </div>
            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1"><strong data-lang-key="sermonModalSpeaker">Speaker:</strong> <span id="sermonModalSpeakerName"></span></p>
            <p class="text-sm text-gray-500 dark:text-gray-400 mb-3"><strong data-lang-key="sermonModalDate">Date:</strong> <span id="sermonModalDateVal"></span></p>
            <div id="sermonModalVideoContainer" class="mb-4 hidden aspect-video">
                <iframe id="sermonModalVideo" width="100%" height="315" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div id="sermonModalDescription" class="text-gray-700 dark:text-gray-200 mb-4 max-h-60 overflow-y-auto">
                Sermon description or transcript preview...
            </div>
            <div id="sermonModalAudioPlayer" class="hidden">
                 <p class="font-semibold mb-2 text-gray-700 dark:text-gray-200" data-lang-key="sermonModalListen">Listen to the sermon:</p>
                 <audio controls class="w-full">
                     <source id="sermonModalAudioSource" src="" type="audio/mpeg">
                     Your browser does not support the audio element.
                 </audio>
            </div>
            <div class="mt-6 text-right">
                <a id="sermonModalFullSermonLink" href="#" class="bg-sky-600 hover:bg-sky-700 text-white font-semibold py-2 px-4 rounded-lg text-sm" data-lang-key="sermonModalViewFull">View Full Sermon Page</a>
            </div>
        </div>
    </div>

    <div id="imageModal" class="fixed inset-0 z-5000 flex items-center justify-center bg-black bg-opacity-75 p-4 hidden modal">
        <div class="bg-white dark:bg-gray-800 p-2 rounded-lg shadow-xl max-w-3xl w-full mx-auto relative modal-content transform scale-95">
            <button id="closeImageModal" class="absolute top-2 right-2 md:-top-4 md:-right-10 text-white bg-black bg-opacity-50 hover:bg-opacity-75 rounded-full p-2 text-2xl z-10">&times;</button>
            <img id="modalImage" src="" alt="Gallery Image" class="max-h-[80vh] w-auto mx-auto rounded">
            <p id="modalCaption" class="text-center text-gray-700 dark:text-gray-200 mt-2 text-sm"></p>
        </div>
    </div>

    <div id="onboardingModal" class="fixed inset-0 z-5000 flex items-center justify-center bg-black bg-opacity-75 p-4 hidden modal">
        <div class="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-xl max-w-lg w-full mx-auto modal-content transform scale-95 text-center" data-aos="zoom-in-down">
            <lottie-player src="https://assets3.lottiefiles.com/packages/lf20_LmW6V2.json" background="transparent" speed="1" style="width: 150px; height: 150px; margin: 0 auto;" loop autoplay></lottie-player>
            <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4 mt-2 font-playfair" data-lang-key="onboardingTitle">Welcome to Our Digital Sanctuary!</h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6" data-lang-key="onboardingMessage">We're thrilled to have you here. Explore our site to discover inspiring sermons, upcoming events, ways to connect, and our new AI Spiritual Companion, Imani!</p>
            <div id="onboardingFeatures" class="text-left mb-6 space-y-2 text-gray-600 dark:text-gray-400">
                <p><i class="fas fa-check-circle text-green-500 mr-2"></i> <span data-lang-key="onboardingFeature1">Discover uplifting content and resources.</span></p>
                <p><i class="fas fa-check-circle text-green-500 mr-2"></i> <span data-lang-key="onboardingFeature2">Connect with our vibrant community.</span></p>
                <p><i class="fas fa-check-circle text-green-500 mr-2"></i> <span data-lang-key="onboardingFeature3">Switch languages or use Dark Mode for comfort.</span></p>
                <p><i class="fas fa-brain text-green-500 mr-2"></i> <span data-lang-key="onboardingFeatureAI">Try "Ask Imani", our AI Spiritual Companion!</span></p>
            </div>
            <button id="closeOnboardingModal" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 px-8 rounded-lg transition duration-150" data-lang-key="onboardingCTA">Start Exploring</button>
        </div>
    </div>


    <a href="https://wa.me/254701234567" class="whatsapp-float" target="_blank" aria-label="Chat on WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <button id="scrollTopBtn" title="Go to top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="https://cdn.jsdelivr.net/npm/keen-slider@latest/keen-slider.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script>
        // --- Global Variables & API Keys ---
        const apiKey = ""; // API Key for Gemini. Left blank as per instructions. Canvas will provide it.

        // --- Translations Object ---
        let translations = {
            siteTitle: { en: "Nehemia Ministry Kenya - Digital Sanctuary of Faith, Hope, and Transformation", sw: "Nehemia Ministry Kenya - Patakatifu pa Kidijitali pa Imani, Matumaini, na Mabadiliko" },
            siteDescription: { en: "Welcome to Nehemia Ministry Kenya, a Christ-centered organization dedicated to spreading the Gospel, nurturing believers, and serving the community. Explore our ministries, sermons, events, and join our transformative journey.", sw: "Karibu Nehemia Ministry Kenya, shirika linalozingatia Kristo lililojitolea kueneza Injili, kulea waumini, na kuhudumia jamii. Gundua huduma zetu, mahubiri, matukio, na ujiunge na safari yetu ya mabadiliko." },
            loading: { en: "Loading Digital Sanctuary...", sw: "Inapakia Patakatifu pa Kidijitali..." },
            navHome: { en: "Home", sw: "Nyumbani" },
            navAbout: { en: "About Us", sw: "Kuhusu Sisi" },
            navMinistries: { en: "Ministries", sw: "Huduma" },
            navSermons: { en: "Sermons", sw: "Mahubiri" },
            navEvents: { en: "Events", sw: "Matukio" },
            navPrayer: { en: "Prayer Wall", sw: "Ukuta wa Maombi" },
            navContact: { en: "Contact", sw: "Mawasiliano" },
            navAdmin: { en: "Admin", sw: "Usimamizi" },
            heroGreeting: { en: "Karibu Sana!", sw: "Karibu Sana!" },
            heroSubtitle: { en: "Embark on a transformative journey with Nehemia Ministry Kenya.", sw: "Anza safari ya mabadiliko na Nehemia Ministry Kenya." },
            heroCTA: { en: "Discover Our Story", sw: "Gundua Hadithi Yetu" },
            wordOfTheDayTitle: { en: "Word of the Day", sw: "Neno la Siku" },
            aboutTitle: { en: "About Nehemia Ministry", sw: "Kuhusu Huduma ya Nehemia" },
            aboutSubtitle: { en: "A Legacy of Faith, A Future of Hope.", sw: "Urithi wa Imani, Mustakabali wa Matumaini." },
            aboutFoundersTitle: { en: "Our Journey & Vision", sw: "Safari Yetu na Dira" },
            aboutIntro: { en: "Founded in 2006 by Bishop David Walukhu and Reverend Selina Walukhu, Nehemia Ministry Kenya began with a divine calling in Mukhonje Village, Kakamega County. From humble beginnings under a tree, our mission has always been to spread the Gospel, nurture believers, and demonstrate God's love through holistic community service.", sw: "Ilianzishwa mwaka 2006 na Askofu David Walukhu na Mchungaji Selina Walukhu, Nehemia Ministry Kenya ilianza na wito wa kimungu katika Kijiji cha Mukhonje, Kaunti ya Kakamega. Kutoka mwanzo mnyenyekevu chini ya mti, dhamira yetu daima imekuwa kueneza Injili, kulea waumini, na kuonyesha upendo wa Mungu kupitia huduma kamili kwa jamii." },
            aboutMission: { en: "We are committed to being a beacon of hope, transforming lives spiritually, physically, and emotionally, guided by the teachings of Jesus Christ.", sw: "Tumejitolea kuwa mnara wa matumaini, kubadilisha maisha kiroho, kimwili, na kihisia, tukiongozwa na mafundisho ya Yesu Kristo." },
            aboutLearnMore: { en: "Learn More About Us", sw: "Jifunze Zaidi Kutuhusu" },
            ministriesTitle: { en: "Pillars of Our Ministry", sw: "Nguzo za Huduma Yetu" },
            ministriesSubtitle: { en: "Serving God, Serving Humanity.", sw: "Kumtumikia Mungu, Kuhudumia Wanadamu." },
            ministryHospitalTitle: { en: "Kingdom Faith-Based Mission Hospital", sw: "Hospitali ya Misheni ya Kingdom Faith-Based" },
            ministryHospitalDesc: { en: "Providing compassionate and holistic healthcare, addressing physical, spiritual, and emotional well-being.", sw: "Kutoa huduma ya afya ya huruma na kamilifu, kushughulikia ustawi wa kimwili, kiroho, na kihisia." },
            ministrySchoolTitle: { en: "Matco Training Institute (Bible School)", sw: "Taasisi ya Mafunzo ya Matco (Shule ya Biblia)" },
            ministrySchoolDesc: { en: "Equipping clergy, lay leaders, and believers with sound biblical knowledge and practical ministry skills.", sw: "Kuwapa wachungaji, viongozi wa kawaida, na waumini maarifa sahihi ya kibiblia na ujuzi wa kivitendo wa huduma." },
            ministryOrphanageTitle: { en: "New Promise Home (Orphanage)", sw: "Nyumba ya Ahadi Mpya (Makao ya Yatima)" },
            ministryOrphanageDesc: { en: "Offering a loving, Christ-centered home for vulnerable children, providing care, education, and spiritual nurturing.", sw: "Kutoa makazi ya upendo, yanayozingatia Kristo kwa watoto walio katika mazingira magumu, kutoa huduma, elimu, na malezi ya kiroho." },
            learnMore: { en: "Learn More", sw: "Jifunze Zaidi" },
            sermonsTitle: { en: "Nourishment for the Soul", sw: "Lishe ya Nafsi" },
            sermonsSubtitle: { en: "Recent messages from our ministry leaders.", sw: "Ujumbe wa hivi karibuni kutoka kwa viongozi wetu wa huduma." },
            sermon1Title: { en: "The Power of Unwavering Faith", sw: "Nguvu ya Imani Isiyotetereka" },
            sermon1Speaker: { en: "Bishop David Walukhu", sw: "Askofu David Walukhu" },
            sermon1Date: { en: "May 19, 2024", sw: "Mei 19, 2024" },
            sermon1Desc: { en: "Discover how steadfast faith can move mountains in your life. An inspiring message on trusting God through all seasons.", sw: "Gundua jinsi imani thabiti inavyoweza kuhamisha milima maishani mwako. Ujumbe wa kutia moyo kuhusu kumwamini Mungu katika majira yote." },
            sermon2Title: { en: "Living a Life of Purpose", sw: "Kuishi Maisha ya Kusudi" },
            sermon2Speaker: { en: "Rev. Selina Walukhu", sw: "Mch. Selina Walukhu" },
            sermon2Date: { en: "May 12, 2024", sw: "Mei 12, 2024" },
            sermon2Desc: { en: "Explore God's unique plan for your life and how to walk in your divine calling with joy and confidence.", sw: "Chunguza mpango wa kipekee wa Mungu kwa maisha yako na jinsi ya kutembea katika wito wako wa kimungu kwa furaha na ujasiri." },
            sermon3Title: { en: "The Joy of Giving", sw: "Furaha ya Kutoa" },
            sermon3Speaker: { en: "Guest Speaker", sw: "Mzungumzaji Mgeni" },
            sermon3Date: { en: "May 5, 2024", sw: "Mei 5, 2024" },
            sermon3Desc: { en: "Understanding the biblical principles of stewardship and the blessings that come from a generous heart.", sw: "Kuelewa kanuni za kibiblia za uwakili na baraka zinazotokana na moyo mkarimu." },
            listenNow: { en: "Listen Now", sw: "Sikiliza Sasa" },
            viewDetails: { en: "View Details", sw: "Angalia Maelezo" },
            sermonsViewAll: { en: "View All Sermons", sw: "Angalia Mahubiri Yote" },
            eventsTitle: { en: "Upcoming Gatherings", sw: "Mikusanyiko Ijayo" },
            eventsSubtitle: { en: "Join us for fellowship, worship, and growth.", sw: "Jiunge nasi kwa ushirika, ibada, na ukuaji." },
            featuredEventTitle: { en: "Annual Youth Conference 2024", sw: "Mkutano Mkuu wa Mwaka wa Vijana 2024" },
            featuredEventDate: { en: "August 15-18, 2024", sw: "Agosti 15-18, 2024" },
            featuredEventLocation: { en: "NMK Mukhonje HQ, Kakamega", sw: "NMK Mukhonje Makao Makuu, Kakamega" },
            featuredEventDesc: { en: "A power-packed conference for young people! Theme: \"Ignited for Purpose\". Expect dynamic speakers, worship, workshops, and fun activities.", sw: "Mkutano wenye nguvu kwa vijana! Kaulimbiu: \"Kuwashwa kwa Kusudi\". Tarajia wazungumzaji mahiri, ibada, warsha, na shughuli za kufurahisha." },
            countdownTitle: { en: "Countdown to Event:", sw: "Muda Uliosalia kwa Tukio:" },
            countdownDays: { en: "Days", sw: "Siku" },
            countdownHours: { en: "Hours", sw: "Saa" },
            countdownMinutes: { en: "Minutes", sw: "Dakika" },
            countdownSeconds: { en: "Seconds", sw: "Sekunde" },
            event1Title: { en: "Community Outreach Program", sw: "Programu ya Kufikia Jamii" },
            event1Date: { en: "June 22, 2024", sw: "Juni 22, 2024" },
            event1Location: { en: "Kibera, Nairobi", sw: "Kibera, Nairobi" },
            event1Desc: { en: "Join us as we share God's love through food distribution, health checks, and prayer.", sw: "Jiunge nasi tunaposhiriki upendo wa Mungu kupitia ugawaji wa chakula, uchunguzi wa afya, na maombi." },
            eventsViewCalendar: { en: "View Full Calendar", sw: "Angalia Kalenda Kamili" },
            prayerTitle: { en: "The Prayer Wall", sw: "Ukuta wa Maombi" },
            prayerSubtitle: { en: "United in prayer, strengthened by faith. Share your requests and pray for others.", sw: "Wamoja katika maombi, wametiwa nguvu na imani. Shiriki maombi yako na uwaombee wengine." },
            prayerNameLabel: { en: "Your Name (Optional)", sw: "Jina Lako (Si Lazima)" },
            prayerNamePlaceholder: { en: "Enter your name", sw: "Andika jina lako" },
            prayerTypeLabel: { en: "Prayer Type", sw: "Aina ya Maombi" },
            prayerTypeHealing: { en: "Healing", sw: "Uponyaji" },
            prayerTypeGuidance: { en: "Guidance", sw: "Mwongozo" },
            prayerTypeThanksgiving: { en: "Thanksgiving", sw: "Shukrani" },
            prayerTypeFamily: { en: "Family", sw: "Familia" },
            prayerTypeOther: { en: "Other", sw: "Mengineyo" },
            prayerRequestLabel: { en: "Your Prayer Request", sw: "Ombi Lako la Maombi" },
            prayerRequestPlaceholder: { en: "Share your prayer request here...", sw: "Shiriki ombi lako la maombi hapa..." },
            prayerSubmitBtn: { en: "Submit Request", sw: "Wasilisha Ombi" },
            prayerIntercede: { en: "I prayed for this", sw: "Nimeombea hili" },
            prayerVisitFull: { en: "Visit Full Prayer Wall", sw: "Tembelea Ukuta Kamili wa Maombi" },
            galleryTitle: { en: "Capturing Grace", sw: "Kukamata Neema" },
            gallerySubtitle: { en: "A visual journey of our ministry's life and impact.", sw: "Safari ya picha ya maisha na athari za huduma yetu." },
            galleryViewAll: { en: "View Full Gallery", sw: "Angalia Matunzio Kamili" },
            testimonialsTitle: { en: "Echoes of Transformation", sw: "Mwangwi wa Mabadiliko" },
            testimonialsSubtitle: { en: "Lives touched by the grace of God through Nehemia Ministry.", sw: "Maisha yaliyoguswa na neema ya Mungu kupitia Huduma ya Nehemia." },
            testimonial1Name: { en: "John N.", sw: "John N." },
            testimonial1Role: { en: "Community Member", sw: "Mwanajamii" },
            testimonial2Name: { en: "Esther S.", sw: "Esther S." },
            testimonial2Role: { en: "Bible School Graduate", sw: "Mhitimu wa Shule ya Biblia" },
            testimonial3Name: { en: "Peter O.", sw: "Peter O." },
            testimonial3Role: { en: "Volunteer", sw: "Mjitoleaji" },
            testimonialSubmit: { en: "Share Your Story", sw: "Shiriki Hadithi Yako" },
            networkTitle: { en: "Our Growing Church Network", sw: "Mtandao Wetu Unaokua wa Makanisa" },
            networkSubtitle: { en: "Spreading the light of the Gospel across Kenya.", sw: "Kueneza nuru ya Injili kote Kenya." },
            branchMukhonje: { en: "Mukhonje (HQ)", sw: "Mukhonje (Makao Makuu)" },
            branchMukhonjeDesc: { en: "The heart of Nehemia Ministry, Kakamega County.", sw: "Moyo wa Huduma ya Nehemia, Kaunti ya Kakamega." },
            branchNairobi: { en: "Nairobi Branch", sw: "Tawi la Nairobi" },
            branchNairobiDesc: { en: "Serving the vibrant community in the capital city.", sw: "Kuhudumia jamii changamfu katika jiji kuu." },
            branchMombasa: { en: "Mombasa Branch", sw: "Tawi la Mombasa" },
            branchMombasaDesc: { en: "Reaching souls in the coastal region.", sw: "Kufikia roho katika eneo la pwani." },
            branchKisumu: { en: "Kisumu Branch", sw: "Tawi la Kisumu" },
            branchKisumuDesc: { en: "Ministering in the lakeside city.", sw: "Kuhudumu katika jiji la kando ya ziwa." },
            branchNakuru: { en: "Nakuru Branch", sw: "Tawi la Nakuru" },
            branchNakuruDesc: { en: "Expanding our reach in the Rift Valley.", sw: "Kupanua ufikiaji wetu katika Bonde la Ufa." },
            branchEldoret: { en: "Eldoret Branch", sw: "Tawi la Eldoret" },
            branchEldoretDesc: { en: "Serving the City of Champions.", sw: "Kuhudumia Jiji la Mabingwa." },
            leadershipTitle: { en: "Meet Our Leaders", sw: "Kutana na Viongozi Wetu" },
            leadershipSubtitle: { en: "Guiding Nehemia Ministry with wisdom and passion.", sw: "Kuongoza Huduma ya Nehemia kwa hekima na shauku." },
            leader1Name: { en: "Bishop David Walukhu", sw: "Askofu David Walukhu" },
            leader1Role: { en: "Founder & Presiding Bishop", sw: "Mwanzilishi na Askofu Mkuu" },
            leader2Name: { en: "Rev. Selina Walukhu", sw: "Mch. Selina Walukhu" },
            leader2Role: { en: "Co-Founder & Director of Ministries", sw: "Mwanzilishi Mwenza na Mkurugenzi wa Huduma" },
            leadershipViewAll: { en: "View All Leaders", sw: "Angalia Viongozi Wote" },
            blogTitle: { en: "Insights & Reflections", sw: "Ufahamu na Tafakari" },
            blogSubtitle: { en: "Latest articles and updates from our ministry.", sw: "Makala za hivi karibuni na sasisho kutoka kwa huduma yetu." },
            blog1Category: { en: "Spiritual Growth", sw: "Ukuaji wa Kiroho" },
            blog1Title: { en: "The Importance of Daily Devotion", sw: "Umuhimu wa Ibada ya Kila Siku" },
            blog1AuthorDate: { en: "By Bishop David Walukhu | May 20, 2024", sw: "Na Askofu David Walukhu | Mei 20, 2024" },
            blog1Excerpt: { en: "Discover practical tips for establishing a meaningful daily quiet time with God...", sw: "Gundua vidokezo vya kivitendo vya kuanzisha muda wa utulivu wa kila siku na Mungu..." },
            readMore: { en: "Read More", sw: "Soma Zaidi" },
            blogViewAll: { en: "Visit Our Blog", sw: "Tembelea Blogu Yetu" },
            giveTitle: { en: "Partner With Us in Transformation", sw: "Shiriki Nasi Katika Mabadiliko" },
            giveSubtitle: { en: "Your generous support empowers us to continue spreading the Gospel, healing the sick, educating leaders, and caring for the vulnerable. Together, we can make a lasting impact.", sw: "Msaada wako wa ukarimu unatuwezesha kuendelea kueneza Injili, kuponya wagonjwa, kuelimisha viongozi, na kuwajali walio hatarini. Pamoja, tunaweza kuleta athari ya kudumu." },
            giveCTA: { en: "Give Securely Online", sw: "Toa Kwa Usalama Mtandaoni" },
            giveOtherWays: { en: "Other ways to give (M-Pesa, Bank Transfer) are detailed on our donations page.", sw: "Njia zingine za kutoa (M-Pesa, Uhamisho wa Benki) zimeelezwa kwa kina kwenye ukurasa wetu wa michango." },
            contactTitle: { en: "Get In Touch", sw: "Wasiliana Nasi" },
            contactSubtitle: { en: "We'd love to hear from you. Connect with us today!", sw: "Tungependa kusikia kutoka kwako. Ungana nasi leo!" },
            contactDetailsTitle: { en: "Our Contact Details", sw: "Maelezo Yetu ya Mawasiliano" },
            contactAddressLabel: { en: "Address:", sw: "Anwani:" },
            contactPhoneLabel: { en: "Phone:", sw: "Simu:" },
            contactEmailLabel: { en: "Email:", sw: "Barua Pepe:" },
            contactHoursLabel: { en: "Office Hours:", sw: "Saa za Ofisi:" },
            contactSocialTitle: { en: "Follow Us:", sw: "Tufuate:" },
            footerAboutTitle: { en: "Nehemia Ministry Kenya", sw: "Nehemia Ministry Kenya" },
            footerAboutText: { en: "A Christ-centered ministry committed to transforming lives and communities through the Gospel and compassionate service.", sw: "Huduma inayomlenga Kristo iliyojitolea kubadilisha maisha na jamii kupitia Injili na huduma ya huruma." },
            footerQuickLinks: { en: "Quick Links", sw: "Viungo vya Haraka" },
            footerContactUs: { en: "Contact Us", sw: "Wasiliana Nasi" },
            footerConnect: { en: "Connect With Us", sw: "Ungana Nasi" },
            footerRights: { en: "All Rights Reserved.", sw: "Haki Zote Zimehifadhiwa." },
            footerDevNote: { en: "Designed with <i class='fas fa-heart text-red-500'></i> by Your Name/Company", sw: "Imeundwa kwa <i class='fas fa-heart text-red-500'></i> na Jina Lako/Kampuni" },
            adminTitle: { en: "Admin Panel", sw: "Jopo la Usimamizi" },
            adminLoginTitle: { en: "Admin Login", sw: "Ingia Usimamizi" },
            login: { en: "Login", sw: "Ingia" },
            logout: { en: "Logout", sw: "Toka" },
            adminWelcome: { en: "Welcome, Admin! Content management features would go here.", sw: "Karibu, Msimamizi! Vipengele vya usimamizi wa maudhui vitawekwa hapa." },
            sermonModalSpeaker: { en: "Speaker:", sw: "Mzungumzaji:" },
            sermonModalDate: { en: "Date:", sw: "Tarehe:" },
            sermonModalListen: { en: "Listen to the sermon:", sw: "Sikiliza mahubiri:" },
            sermonModalViewFull: { en: "View Full Sermon Page", sw: "Angalia Ukurasa Kamili wa Mahubiri" },
            onboardingTitle: { en: "Welcome to Our Digital Sanctuary!", sw: "Karibu kwenye Patakatifu Petu pa Kidijitali!" },
            onboardingMessage: { en: "We're thrilled to have you here. Explore our site to discover inspiring sermons, upcoming events, ways to connect, and our new AI Spiritual Companion, Imani!", sw: "Tumefurahi kuwa nawe hapa. Gundua tovuti yetu kupata mahubiri ya kutia moyo, matukio yajayo, njia za kuungana, na Mwenzetu mpya wa Kiroho wa AI, Imani!" },
            onboardingFeature1: { en: "Discover uplifting content and resources.", sw: "Gundua maudhui na rasilimali za kuinua." },
            onboardingFeature2: { en: "Connect with our vibrant community.", sw: "Ungana na jamii yetu hai." },
            onboardingFeature3: { en: "Switch languages or use Dark Mode for comfort.", sw: "Badilisha lugha au tumia Hali Nyeusi kwa faraja." },
            onboardingFeatureAI: { en: "Try \"Ask Imani\", our AI Spiritual Companion!", sw: "Jaribu \"Uliza Imani\", Mwenzetu wa Kiroho wa AI!" },
            onboardingCTA: { en: "Start Exploring", sw: "Anza Kugundua" },
            // AI Feature Translations
            navAI: { en: "AI Assistant", sw: "Msaidizi wa AI" },
            aiChatTitle: { en: "Ask Imani: Your AI Spiritual Companion", sw: "Uliza Imani: Mwenzako wa Kiroho wa AI" },
            aiChatSubtitle: { en: "Have questions about faith, scripture, or need a word of encouragement? Imani is here to help.", sw: "Una maswali kuhusu imani, maandiko, au unahitaji neno la kutia moyo? Imani yuko hapa kusaidia." },
            aiChatDisclaimer: { en: "<em>Imani is an AI assistant. For pastoral counseling, please connect with our ministry team.</em>", sw: "<em>Imani ni msaidizi wa AI. Kwa ushauri wa kichungaji, tafadhali wasiliana na timu yetu ya huduma.</em>" },
            aiChatPlaceholder: { en: "Type your question here...", sw: "Andika swali lako hapa..." },
            aiChatSend: { en: "Send", sw: "Tuma" },
            aiChatThinking: { en: "Imani is thinking...", sw: "Imani anafikiria..." },
            aiChatGreeting: { en: "Karibu! I'm Imani. How can I assist you on your spiritual journey today?", sw: "Karibu! Mimi ni Imani. Ninawezaje kukusaidia katika safari yako ya kiroho leo?" },
            aiChatErrorConnect: { en: "Sorry, I am having trouble connecting. Please check your internet connection and try again.", sw: "Samahani, ninapata shida kuunganisha. Tafadhali angalia muunganisho wako wa intaneti na ujaribu tena." },
            aiChatErrorResponse: { en: "I'm sorry, I received an unusual response from my core systems. Please try asking in a different way.", sw: "Samahani, nimepokea jibu lisilo la kawaida kutoka kwa mifumo yangu mikuu. Tafadhali jaribu kuuliza kwa njia tofauti." },
            aiChatErrorBlocked: { en: "I'm sorry, I cannot respond to that request due to content restrictions. Please try a different question.", sw: "Samahani, siwezi kujibu ombi hilo kutokana na vikwazo vya maudhui. Tafadhali jaribu swali tofauti." },
            explainVerseBtnText: { en: "Explain Verse (AI)", sw: "Fafanua Mstari (AI)" },
            explainVerseLoading: { en: "Getting AI explanation...", sw: "Inapata ufafanuzi wa AI..." },
        };

        // --- Helper Functions ---
        function mergeTranslations(newTranslations) {
            if (typeof translations !== 'undefined') {
                for (const key in newTranslations) {
                    if (newTranslations.hasOwnProperty(key)) {
                        translations[key] = newTranslations[key];
                    }
                }
            } else {
                console.warn('Original `translations` object not found. Some translations may not work.');
                translations = newTranslations; // Fallback
            }
        }
        
        // --- Language and Dark Mode ---
        let currentLang = localStorage.getItem('language') || 'en';
        let isDarkMode = localStorage.getItem('darkMode') === 'true';

        const languageSelector = document.getElementById('languageSelector');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const htmlElement = document.documentElement;

        function applyDarkMode() {
            if (isDarkMode) {
                htmlElement.classList.add('dark');
                darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>'; // Sun icon for light mode
            } else {
                htmlElement.classList.remove('dark');
                darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>'; // Moon icon for dark mode
            }
        }

        function changeLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('language', lang);
            languageSelector.value = lang; // Update dropdown

            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (translations[key] && translations[key][lang]) {
                    // Sanitize if HTML content is allowed (like in footDevNote)
                    if (key === 'footerDevNote' || key === 'aiChatDisclaimer') { // Example keys that might contain HTML
                         el.innerHTML = translations[key][lang];
                    } else {
                        el.textContent = translations[key][lang];
                    }
                }
            });
            document.querySelectorAll('[data-lang-key-placeholder]').forEach(el => {
                const key = el.getAttribute('data-lang-key-placeholder');
                 if (translations[key] && translations[key][lang]) {
                    el.placeholder = translations[key][lang];
                }
            });
            // Update dynamic content like Word of the Day if needed
            updateWordOfTheDay(); 
            // Update initial AI chat greeting if chat window is present
            if (chatWindow && translations.aiChatGreeting) {
                const initialGreeting = translations.aiChatGreeting[currentLang] || translations.aiChatGreeting.en;
                if (chatHistory[0] && chatHistory[0].role === 'model') {
                    chatHistory[0].parts[0].text = initialGreeting;
                    const firstMessageBubble = chatWindow.querySelector('.bg-sky-500'); // AI message
                    if (firstMessageBubble && chatWindow.children.length === 1) { // Only if it's the initial greeting
                        firstMessageBubble.textContent = initialGreeting;
                    }
                }
            }
        }

        // --- Preloader ---
        window.addEventListener('load', () => {
            const preloader = document.getElementById('preloader');
            if(preloader) {
                setTimeout(() => { // Ensure content is rendered
                    preloader.style.opacity = '0';
                    preloader.style.visibility = 'hidden';
                    preloader.style.transition = 'opacity 0.5s, visibility 0.5s';
                    setTimeout(() => preloader.style.display = 'none', 500);
                }, 500); // Small delay
            }
            // Onboarding Modal for first-time visitors
            if (!localStorage.getItem('visitedBefore')) {
                setTimeout(() => { // Show after preloader
                    const onboardingModal = document.getElementById('onboardingModal');
                    if(onboardingModal) {
                        onboardingModal.classList.remove('hidden');
                        onboardingModal.querySelector('.modal-content').classList.remove('scale-95');
                        onboardingModal.querySelector('.modal-content').classList.add('scale-100');
                    }
                    localStorage.setItem('visitedBefore', 'true');
                }, 1000);
            }
        });
        
        // --- DOMContentLoaded Event Listener ---
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize AOS
            AOS.init({
                duration: 800,
                once: true, // Animation happens only once
                offset: 50, // Offset (in px) from the original trigger point
            });

            // Initialize Dark Mode & Language
            applyDarkMode();
            changeLanguage(currentLang);

            if (languageSelector) {
                languageSelector.addEventListener('change', (e) => changeLanguage(e.target.value));
            }
            if (darkModeToggle) {
                darkModeToggle.addEventListener('click', () => {
                    isDarkMode = !isDarkMode;
                    localStorage.setItem('darkMode', isDarkMode);
                    applyDarkMode();
                });
            }
            
            // Initialize other functions
            initFunctions();

            // Add AI Assistant link to Navbar (Desktop & Mobile)
            const navbarLinksDesktop = document.querySelector('#navbar-links');
            const navbarLinksMobile = document.querySelector('#mobile-navbar-links');

            if (navbarLinksDesktop) {
                const aiLinkLi = document.createElement('li');
                const aiLinkA = document.createElement('a');
                aiLinkA.href = '#ai-assistant';
                aiLinkA.classList.add('text-gray-700', 'dark:text-gray-300', 'hover:bg-gray-100', 'dark:hover:bg-gray-700', 'hover:text-amber-500', 'dark:hover:text-amber-400', 'px-3', 'py-2', 'rounded-md', 'text-sm', 'font-medium', 'transition-colors', 'duration-150');
                aiLinkA.setAttribute('data-lang-key', 'navAI');
                aiLinkA.textContent = translations.navAI[currentLang] || translations.navAI.en; // Initial text
                aiLinkLi.appendChild(aiLinkA);
                
                const contactLinkDesktop = Array.from(navbarLinksDesktop.querySelectorAll('a')).find(a => (a.getAttribute('data-lang-key') === 'navContact'));
                if (contactLinkDesktop && contactLinkDesktop.parentElement) {
                    navbarLinksDesktop.insertBefore(aiLinkLi, contactLinkDesktop.parentElement);
                } else {
                    navbarLinksDesktop.appendChild(aiLinkLi); // Fallback
                }
            }

            if (navbarLinksMobile) {
                const aiLinkAMobile = document.createElement('a');
                aiLinkAMobile.href = '#ai-assistant';
                aiLinkAMobile.classList.add('text-gray-700', 'dark:text-gray-300', 'hover:bg-gray-100', 'dark:hover:bg-gray-700', 'hover:text-amber-500', 'dark:hover:text-amber-400', 'block', 'px-3', 'py-2', 'rounded-md', 'text-base', 'font-medium', 'transition-colors', 'duration-150');
                aiLinkAMobile.setAttribute('data-lang-key', 'navAI');
                aiLinkAMobile.textContent = translations.navAI[currentLang] || translations.navAI.en; // Initial text
                
                const contactLinkMobile = Array.from(navbarLinksMobile.querySelectorAll('a')).find(a => (a.getAttribute('data-lang-key') === 'navContact'));
                if (contactLinkMobile) {
                     navbarLinksMobile.insertBefore(aiLinkAMobile, contactLinkMobile);
                } else {
                    navbarLinksMobile.appendChild(aiLinkAMobile); // Fallback
                }
            }
            // Re-apply language to ensure new AI nav link is translated if page loaded with non-default lang
            changeLanguage(currentLang);
        });


        function initFunctions() {
            // Mobile Menu Toggle
            const mobileMenuButton = document.getElementById('mobileMenuButton');
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    const expanded = mobileMenuButton.getAttribute('aria-expanded') === 'true' || false;
                    mobileMenuButton.setAttribute('aria-expanded', !expanded);
                    mobileMenu.classList.toggle('hidden');
                    mobileMenuButton.querySelector('i').classList.toggle('fa-bars');
                    mobileMenuButton.querySelector('i').classList.toggle('fa-times');
                });
                // Close mobile menu when a link is clicked
                mobileMenu.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        mobileMenuButton.setAttribute('aria-expanded', 'false');
                        mobileMenu.classList.add('hidden');
                        mobileMenuButton.querySelector('i').classList.remove('fa-times');
                        mobileMenuButton.querySelector('i').classList.add('fa-bars');
                    });
                });
            }
            
            // Smooth Scrolling for Navbar Links
            document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href.length > 1 && document.querySelector(href)) { // Check if it's not just "#" and element exists
                        e.preventDefault();
                        const targetElement = document.querySelector(href);
                        if (targetElement) {
                             // Consider navbar height for accurate scroll
                            const navbarHeight = document.querySelector('nav').offsetHeight;
                            const elementPosition = targetElement.getBoundingClientRect().top;
                            const offsetPosition = elementPosition + window.pageYOffset - navbarHeight;

                            window.scrollTo({
                                top: offsetPosition,
                                behavior: "smooth"
                            });
                        }
                    }
                });
            });


            // Dynamic Greeting
            updateDynamicGreeting();

            // Scripture Slider
            initScriptureSlider();

            // Word of the Day
            updateWordOfTheDay();

            // Event Countdown
            initEventCountdown();

            // Testimonial Carousel (using Keen Slider)
            const testimonialCarousel = document.getElementById('testimonialCarousel');
            if (testimonialCarousel && typeof KeenSlider !== 'undefined') {
                new KeenSlider(testimonialCarousel, {
                    loop: true,
                    slides: {
                        perView: 1,
                        spacing: 15,
                    },
                    breakpoints: {
                        '(min-width: 768px)': {
                            slides: { perView: 2, spacing: 20 },
                        },
                        '(min-width: 1024px)': {
                            slides: { perView: 3, spacing: 25 },
                        },
                    },
                    autoplay: {
                        delay: 5000,
                        disableOnInteraction: false,
                    },
                });
            }

            // Prayer Wall Form & Interaction
            const prayerForm = document.getElementById('prayerRequestForm');
            if (prayerForm) {
                prayerForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const name = this.prayerName.value || 'Anonymous';
                    const type = this.prayerType.options[this.prayerType.selectedIndex].text;
                    const request = this.prayerRequest.value;
                    addPrayerRequestToWall(name, type, request);
                    this.reset();
                    // Here you would typically send data to a server
                    alert(translations.prayerSubmitSuccess?.[currentLang] || 'Prayer request submitted! (Simulation)');
                });
            }
            document.querySelectorAll('.prayed-for-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const countSpan = this.querySelector('.prayed-count');
                    let count = parseInt(countSpan.textContent);
                    countSpan.textContent = count + 1;
                    this.disabled = true; // Prevent multiple clicks from same user (session-based)
                    this.innerHTML = `<i class="fas fa-check mr-1"></i> ${translations.prayerInterceded?.[currentLang] || 'Prayed'} (${count + 1})`;
                });
            });


            // Sermon Modals
            const sermonModal = document.getElementById('sermonModal');
            const closeSermonModalBtn = document.getElementById('closeSermonModal');
            const sermonModalTitle = document.getElementById('sermonModalTitle');
            const sermonModalSpeaker = document.getElementById('sermonModalSpeakerName');
            const sermonModalDate = document.getElementById('sermonModalDateVal');
            const sermonModalDescription = document.getElementById('sermonModalDescription');
            const sermonModalVideoContainer = document.getElementById('sermonModalVideoContainer');
            const sermonModalVideo = document.getElementById('sermonModalVideo');
            const sermonModalAudioPlayer = document.getElementById('sermonModalAudioPlayer');
            const sermonModalAudioSource = document.getElementById('sermonModalAudioSource');


            document.querySelectorAll('.sermon-details-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    sermonModalTitle.textContent = btn.dataset.sermonTitle;
                    sermonModalSpeaker.textContent = btn.dataset.sermonSpeaker;
                    sermonModalDate.textContent = btn.dataset.sermonDate;
                    sermonModalDescription.innerHTML = btn.dataset.sermonDesc.replace(/\n/g, '<br>'); // Basic formatting

                    if (btn.dataset.sermonVideo) {
                        sermonModalVideo.src = btn.dataset.sermonVideo;
                        sermonModalVideoContainer.classList.remove('hidden');
                    } else {
                        sermonModalVideoContainer.classList.add('hidden');
                        sermonModalVideo.src = ""; // Clear src
                    }
                    sermonModalAudioPlayer.classList.add('hidden'); // Hide audio player when viewing details
                    sermonModal.classList.remove('hidden');
                    sermonModal.querySelector('.modal-content').classList.remove('scale-95');
                    sermonModal.querySelector('.modal-content').classList.add('scale-100');
                });
            });
            
            document.querySelectorAll('.sermon-listen-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    sermonModalTitle.textContent = btn.dataset.sermonTitle;
                    sermonModalSpeaker.textContent = btn.dataset.sermonSpeaker;
                    sermonModalDate.textContent = "Audio Playback"; // Or fetch date if available
                    sermonModalDescription.innerHTML = btn.dataset.sermonTranscript || "Audio playback for this sermon.";

                    sermonModalVideoContainer.classList.add('hidden');
                    sermonModalVideo.src = "";

                    if(btn.dataset.sermonAudio) {
                        sermonModalAudioSource.src = btn.dataset.sermonAudio;
                        sermonModalAudioPlayer.querySelector('audio').load(); // Reload audio
                        sermonModalAudioPlayer.classList.remove('hidden');
                    } else {
                        sermonModalAudioPlayer.classList.add('hidden');
                    }
                    sermonModal.classList.remove('hidden');
                    sermonModal.querySelector('.modal-content').classList.remove('scale-95');
                    sermonModal.querySelector('.modal-content').classList.add('scale-100');
                });
            });


            if (closeSermonModalBtn) {
                closeSermonModalBtn.addEventListener('click', () => {
                    sermonModal.classList.add('hidden');
                    sermonModal.querySelector('.modal-content').classList.add('scale-95');
                    sermonModal.querySelector('.modal-content').classList.remove('scale-100');
                    sermonModalVideo.src = ""; // Stop video playback
                    sermonModalAudioSource.src = ""; // Stop audio
                    sermonModalAudioPlayer.querySelector('audio').pause();
                });
            }

            // Image Gallery Modal
            const imageModal = document.getElementById('imageModal');
            const closeImageModalBtn = document.getElementById('closeImageModal');
            if (imageModal && closeImageModalBtn) {
                 closeImageModalBtn.addEventListener('click', () => {
                    imageModal.classList.add('hidden');
                    imageModal.querySelector('.modal-content').classList.add('scale-95');
                    imageModal.querySelector('.modal-content').classList.remove('scale-100');
                });
            }
            
            // Onboarding Modal Close
            const closeOnboardingModalBtn = document.getElementById('closeOnboardingModal');
            if (closeOnboardingModalBtn) {
                closeOnboardingModalBtn.addEventListener('click', () => {
                    const onboardingModal = document.getElementById('onboardingModal');
                    onboardingModal.classList.add('hidden');
                    onboardingModal.querySelector('.modal-content').classList.add('scale-95');
                    onboardingModal.querySelector('.modal-content').classList.remove('scale-100');
                });
            }


            // Close modals on escape key
            window.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    [sermonModal, imageModal, document.getElementById('onboardingModal')].forEach(modal => {
                        if (modal && !modal.classList.contains('hidden')) {
                            modal.classList.add('hidden');
                            modal.querySelector('.modal-content').classList.add('scale-95');
                            modal.querySelector('.modal-content').classList.remove('scale-100');
                            if(modal.id === 'sermonModal') { // Specific cleanup for sermon modal
                                sermonModalVideo.src = ""; 
                                sermonModalAudioSource.src = "";
                                sermonModalAudioPlayer.querySelector('audio').pause();
                            }
                        }
                    });
                }
            });

            // Current Year for Footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // Scroll to Top Button
            const scrollTopBtn = document.getElementById('scrollTopBtn');
            if (scrollTopBtn) {
                window.onscroll = function() {
                    if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                        scrollTopBtn.style.display = "block";
                    } else {
                        scrollTopBtn.style.display = "none";
                    }
                };
                scrollTopBtn.addEventListener('click', () => {
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
            }

            // Admin Panel Simulation
            const adminLink = document.getElementById('adminLink');
            const mobileAdminLink = document.getElementById('mobileAdminLink');
            const adminSection = document.getElementById('admin');
            const adminLoginDiv = document.getElementById('adminLogin');
            const adminContentDiv = document.getElementById('adminContent');
            const adminPasswordInput = document.getElementById('adminPassword');
            const adminLoginBtn = document.getElementById('adminLoginBtn');
            const adminLogoutBtn = document.getElementById('adminLogoutBtn');
            const adminLoginError = document.getElementById('adminLoginError');
            const SIMULATED_PASSWORD = "NMKadmin2024!"; // Change this for basic simulation

            function showAdminSection() {
                if (adminSection) adminSection.classList.remove('hidden');
                if (localStorage.getItem('nmkAdminLoggedIn') === 'true') {
                    if (adminLoginDiv) adminLoginDiv.classList.add('hidden');
                    if (adminContentDiv) adminContentDiv.classList.remove('hidden');
                } else {
                    if (adminLoginDiv) adminLoginDiv.classList.remove('hidden');
                    if (adminContentDiv) adminContentDiv.classList.add('hidden');
                }
            }

            if (adminLink) adminLink.addEventListener('click', (e) => { e.preventDefault(); showAdminSection(); adminSection.scrollIntoView({behavior: 'smooth'}); });
            if (mobileAdminLink) mobileAdminLink.addEventListener('click', (e) => { e.preventDefault(); showAdminSection(); adminSection.scrollIntoView({behavior: 'smooth'}); });

            if (adminLoginBtn) {
                adminLoginBtn.addEventListener('click', () => {
                    if (adminPasswordInput.value === SIMULATED_PASSWORD) {
                        localStorage.setItem('nmkAdminLoggedIn', 'true');
                        if (adminLoginError) adminLoginError.textContent = '';
                        showAdminSection();
                    } else {
                        if (adminLoginError) adminLoginError.textContent = translations.adminLoginError?.[currentLang] || 'Invalid password.';
                        localStorage.removeItem('nmkAdminLoggedIn');
                    }
                });
            }
            if (adminLogoutBtn) {
                adminLogoutBtn.addEventListener('click', () => {
                    localStorage.removeItem('nmkAdminLoggedIn');
                    if (adminPasswordInput) adminPasswordInput.value = '';
                    showAdminSection();
                });
            }
            // Check login state on load
            if (localStorage.getItem('nmkAdminLoggedIn') === 'true' && window.location.hash === '#admin') {
                 showAdminSection();
            }
        } // End of initFunctions

        function updateDynamicGreeting() {
            const greetings = {
                en: ["Welcome!", "Karibu Sana!", "Glad to See You!", "Faith Awaits You!"],
                sw: ["Karibu Sana!", "Tunafurahi Kukuona!", "Imani Inakungoja!", "Karibu Tena!"]
            };
            const dynamicGreetingEl = document.getElementById('dynamicGreeting');
            if (dynamicGreetingEl) {
                const langGreetings = greetings[currentLang] || greetings.en;
                let currentIndex = 0;
                setInterval(() => {
                    dynamicGreetingEl.style.opacity = 0;
                    setTimeout(() => {
                        currentIndex = (currentIndex + 1) % langGreetings.length;
                        dynamicGreetingEl.textContent = langGreetings[currentIndex];
                        dynamicGreetingEl.style.opacity = 1;
                    }, 500); // Match CSS transition
                }, 5000); // Change every 5 seconds
            }
        }

        function initScriptureSlider() {
            const slides = document.querySelectorAll('#scriptureSlider .scripture-slide');
            if (slides.length === 0) return;
            let currentSlide = 0;
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 7000); // Change every 7 seconds
        }

        function updateWordOfTheDay() {
            const scriptures = [
                { en: { text: "Trust in the LORD with all your heart and lean not on your own understanding.", citation: "Proverbs 3:5" }, sw: { text: "Mtumaini BWANA kwa moyo wako wote, Wala usitegemee akili zako mwenyewe.", citation: "Mithali 3:5" } },
                { en: { text: "Be strong and courageous. Do not be afraid; do not be discouraged, for the LORD your God will be with you wherever you go.", citation: "Joshua 1:9" }, sw: { text: "Uwe hodari na moyo wa ushujaa; usiogope wala usifadhaike; kwa kuwa BWANA, Mungu wako, yu pamoja nawe kila uendako.", citation: "Yoshua 1:9" } },
                { en: { text: "The fruit of the Spirit is love, joy, peace, forbearance, kindness, goodness, faithfulness, gentleness and self-control.", citation: "Galatians 5:22-23" }, sw: { text: "Lakini tunda la Roho ni upendo, furaha, amani, uvumilivu, utu wema, fadhili, uaminifu, upole, kiasi.", citation: "Wagalatia 5:22-23" } },
                { en: { text: "For God so loved the world that he gave his one and only Son, that whoever believes in him shall not perish but have eternal life.", citation: "John 3:16" }, sw: { text: "Kwa maana jinsi hii Mungu aliupenda ulimwengu, hata akamtoa Mwanawe pekee, ili kila mtu amwaminiye asipotee, bali awe na uzima wa milele.", citation: "Yohana 3:16" } }
            ];
            const today = new Date();
            const dayIndex = today.getDate() % scriptures.length; // Simple daily rotation
            const scripture = scriptures[dayIndex][currentLang] || scriptures[dayIndex].en;

            const dailyScriptureEl = document.getElementById('dailyScripture');
            const dailyCitationEl = document.getElementById('dailyCitation');
            if (dailyScriptureEl && dailyCitationEl) {
                dailyScriptureEl.textContent = `"${scripture.text}"`;
                dailyCitationEl.textContent = scripture.citation;
            }
             // Reset AI explanation when word of the day changes
            const verseExplanationDiv = document.getElementById('verseExplanation');
            if(verseExplanationDiv) verseExplanationDiv.classList.add('hidden');
        }

        function initEventCountdown() {
            const countdownDate = new Date("August 15, 2024 00:00:00").getTime(); // Set your event date here
            const countdownEl = document.getElementById('eventCountdown');
            if (!countdownEl) return;

            const daysEl = document.getElementById('days');
            const hoursEl = document.getElementById('hours');
            const minutesEl = document.getElementById('minutes');
            const secondsEl = document.getElementById('seconds');

            if(!daysEl || !hoursEl || !minutesEl || !secondsEl) return;

            const interval = setInterval(() => {
                const now = new Date().getTime();
                const distance = countdownDate - now;

                if (distance < 0) {
                    clearInterval(interval);
                    countdownEl.innerHTML = `<p class="text-xl" data-lang-key="eventPassed">${translations.eventPassed?.[currentLang] || 'This event has passed!'}</p>`;
                    return;
                }

                daysEl.textContent = Math.floor(distance / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
                hoursEl.textContent = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
                minutesEl.textContent = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
                secondsEl.textContent = Math.floor((distance % (1000 * 60)) / 1000).toString().padStart(2, '0');
            }, 1000);
        }

        function addPrayerRequestToWall(name, type, request) {
            const prayerWall = document.getElementById('prayerWallDisplay');
            if (!prayerWall) return;

            const requestDiv = document.createElement('div');
            requestDiv.className = 'p-4 bg-sky-50 dark:bg-sky-900 rounded-lg shadow-sm animate-fadeIn'; // Added animation class
            requestDiv.innerHTML = `
                <p class="text-gray-700 dark:text-gray-200 text-sm">"${request.replace(/(<([^>]+)>)/gi, "")}" - <span class="font-semibold">${name.replace(/(<([^>]+)>)/gi, "")}</span> (<span class="italic">${type.replace(/(<([^>]+)>)/gi, "")}</span>)</p>
                <button class="text-xs text-sky-600 dark:text-sky-400 mt-1 hover:underline prayed-for-btn"><i class="fas fa-hands-praying mr-1"></i> <span data-lang-key="prayerIntercede">${translations.prayerIntercede?.[currentLang] || 'I prayed for this'}</span> (<span class="prayed-count">0</span>)</button>
            `;
            // Add to top of list
            if (prayerWall.firstChild) {
                prayerWall.insertBefore(requestDiv, prayerWall.firstChild);
            } else {
                prayerWall.appendChild(requestDiv);
            }
            // Re-attach event listener for the new button
            requestDiv.querySelector('.prayed-for-btn').addEventListener('click', function() {
                const countSpan = this.querySelector('.prayed-count');
                let count = parseInt(countSpan.textContent);
                countSpan.textContent = count + 1;
                this.disabled = true;
                this.innerHTML = `<i class="fas fa-check mr-1"></i> ${translations.prayerInterceded?.[currentLang] || 'Prayed'} (${count + 1})`;
            });
        }
        
        // Function to open image modal (global scope for inline onclick)
        function openImageModal(src, caption) {
            const imageModal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const modalCaption = document.getElementById('modalCaption');
            if (imageModal && modalImage && modalCaption) {
                modalImage.src = src;
                modalImage.alt = caption;
                modalCaption.textContent = caption;
                imageModal.classList.remove('hidden');
                imageModal.querySelector('.modal-content').classList.remove('scale-95');
                imageModal.querySelector('.modal-content').classList.add('scale-100');
            }
        }

        // --- AI Chatbot ("Ask Imani") Functionality ---
        const chatWindow = document.getElementById('chat-window');
        const chatInput = document.getElementById('chat-input');
        const sendChatBtn = document.getElementById('send-chat-btn');
        const aiLoadingIndicator = document.getElementById('ai-loading-indicator');

        let chatHistory = [
            {
                role: "model",
                parts: [{ text: translations.aiChatGreeting?.[currentLang] || translations.aiChatGreeting?.en || "Karibu! I'm Imani. How can I assist you today?" }]
            }
        ];

        function appendMessageToChat(message, sender) {
            if (!chatWindow) return;
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('flex', sender === 'user' ? 'justify-end' : 'justify-start', 'mb-3');
            
            const messageBubble = document.createElement('div');
            messageBubble.classList.add('p-3', 'rounded-lg', 'max-w-md', 'lg:max-w-xl', 'break-words', 'shadow');
            if (sender === 'user') {
                messageBubble.classList.add('bg-amber-500', 'text-white');
            } else {
                messageBubble.classList.add('bg-sky-600', 'text-white'); // AI messages
            }
            // Sanitize message - basic text sanitization
            const cleanMessage = message.replace(/(<([^>]+)>)/gi, "");
            messageBubble.textContent = cleanMessage;
            
            messageDiv.appendChild(messageBubble);
            chatWindow.appendChild(messageDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // Initialize chat with greeting
        if (chatWindow) {
            appendMessageToChat(chatHistory[0].parts[0].text, "ai");
        }

        async function handleSendMessageToAI() {
            if (!chatInput || !sendChatBtn || !aiLoadingIndicator) return;
            const userMessage = chatInput.value.trim();
            if (!userMessage) return;

            appendMessageToChat(userMessage, 'user');
            chatInput.value = '';
            aiLoadingIndicator.classList.remove('hidden');
            sendChatBtn.disabled = true;
            chatInput.disabled = true;

            chatHistory.push({ role: "user", parts: [{ text: userMessage }] });

            const ministryContext = `
                You are Imani, a friendly, compassionate, and knowledgeable AI Spiritual Companion representing Nehemia Ministry Kenya.
                Nehemia Ministry Kenya, founded in 2006 by Bishop David Walukhu and Reverend Selina Walukhu, is a Christ-centered organization based in Mukhonje Village, Kakamega County.
                Its mission is to spread the Gospel, nurture believers, and demonstrate God's love through holistic community service.
                Key pillars include Kingdom Faith-Based Mission Hospital (holistic healing), Matco Training Institute (Bible School for leaders), and New Promise Home (Orphanage for vulnerable children).
                Your answers should be rooted in Christian teachings and the Bible. Be encouraging, supportive, and respectful.
                If asked about specific ministry activities, you can mention these pillars if relevant.
                If asked for medical, legal, or deep psychological advice, gently decline and suggest seeking professional human help or contacting the ministry directly for pastoral care.
                Keep responses concise yet informative, generally under 150 words unless a detailed explanation is truly needed.
                The user is seeking guidance or information. Your language should be warm and welcoming.
                If the user asks in Swahili, try to respond in Swahili if you are confident. Otherwise, English is fine.
            `;

            // We send a limited history to keep the payload small and focused.
            // The fullPrompt is added to the last user message.
            const recentHistoryForPrompt = chatHistory.slice(-6); // last 3 user/model pairs
            recentHistoryForPrompt[recentHistoryForPrompt.length-1].parts[0].text = `${ministryContext}\n\nRecent conversation turn:\nUser: ${userMessage}\n\nProvide a helpful and biblically-grounded response as Imani:`;


            const payload = {
                contents: recentHistoryForPrompt,
                generationConfig: {
                    // temperature: 0.7, // Adjust for creativity vs. factuality
                    // topP: 0.9,
                    // topK: 40,
                    // maxOutputTokens: 250, // Control response length
                },
                safetySettings: [ // Example safety settings
                    { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                    { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                    { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                    { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" }
                ]
            };
            
            // Prune overall chatHistory to prevent it from growing indefinitely
            if (chatHistory.length > 10) { 
                chatHistory = [chatHistory[0], ...chatHistory.slice(-10)]; // Keep initial greeting + last 5 pairs
            }

            try {
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('Gemini API Error (Chatbot):', errorData);
                    const errorMsg = translations.aiChatErrorResponse?.[currentLang] || "Sorry, I encountered an error trying to respond.";
                    appendMessageToChat(`${errorMsg} (Status: ${response.status})`, 'ai');
                    chatHistory.pop(); 
                    return;
                }

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const aiResponse = result.candidates[0].content.parts[0].text;
                    appendMessageToChat(aiResponse, 'ai');
                    chatHistory.push({ role: "model", parts: [{ text: aiResponse }] });
                } else if (result.promptFeedback && result.promptFeedback.blockReason) {
                    console.error('AI response blocked (Chatbot):', result.promptFeedback);
                    const blockMsg = translations.aiChatErrorBlocked?.[currentLang] || "I'm sorry, I cannot respond to that request due to content restrictions.";
                    appendMessageToChat(`${blockMsg} (Reason: ${result.promptFeedback.blockReason})`, 'ai');
                    chatHistory.pop(); 
                } else {
                    console.error('Unexpected AI response structure (Chatbot):', result);
                    const unexpectedMsg = translations.aiChatErrorResponse?.[currentLang] || "I'm sorry, I received an unusual response.";
                    appendMessageToChat(unexpectedMsg, 'ai');
                    chatHistory.pop(); 
                }

            } catch (error) {
                console.error('Error calling Gemini API (Chatbot):', error);
                const connectMsg = translations.aiChatErrorConnect?.[currentLang] || 'Sorry, I am having trouble connecting.';
                appendMessageToChat(connectMsg, 'ai');
                chatHistory.pop(); 
            } finally {
                aiLoadingIndicator.classList.add('hidden');
                sendChatBtn.disabled = false;
                chatInput.disabled = false;
                chatInput.focus();
            }
        }

        if (sendChatBtn && chatInput) {
            sendChatBtn.addEventListener('click', handleSendMessageToAI);
            chatInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    handleSendMessageToAI();
                }
            });
        }

        // --- AI Verse Explainer ---
        const explainVerseBtn = document.getElementById('explainVerseBtn');
        const verseExplanationDiv = document.getElementById('verseExplanation');
        const dailyScriptureEl = document.getElementById('dailyScripture');
        const dailyCitationEl = document.getElementById('dailyCitation');
        const verseExplainerLoadingIndicator = document.getElementById('verse-explainer-loading-indicator');

        async function getVerseExplanationFromAI() {
            if (!dailyScriptureEl || !dailyCitationEl || !verseExplanationDiv || !verseExplainerLoadingIndicator || !explainVerseBtn) return;

            const verseText = dailyScriptureEl.textContent;
            const verseCitation = dailyCitationEl.textContent;

            if (!verseText || !verseCitation) {
                verseExplanationDiv.textContent = "Could not find the verse to explain.";
                verseExplanationDiv.classList.remove('hidden');
                return;
            }

            verseExplanationDiv.classList.add('hidden'); 
            verseExplanationDiv.textContent = ''; 
            verseExplainerLoadingIndicator.classList.remove('hidden');
            explainVerseBtn.disabled = true;

            const prompt = `You are a theological assistant. Explain the meaning and significance of the Bible verse: ${verseText} (${verseCitation}). Provide a brief, insightful reflection suitable for a daily devotional, in about 2-4 sentences. Focus on clarity, encouragement, and the core message of the verse. If the verse is in Swahili, respond in Swahili if possible, otherwise English.`;

            const payload = {
                contents: [{ role: "user", parts: [{ text: prompt }] }],
                generationConfig: { /* temperature: 0.6 */ },
                 safetySettings: [ 
                    { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                    { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_MEDIUM_AND_ABOVE" }
                ]
            };

            try {
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('Gemini API Error (Verse Explainer):', errorData);
                    verseExplanationDiv.textContent = `Sorry, could not get an explanation. (Server: ${response.statusText})`;
                    verseExplanationDiv.classList.remove('hidden');
                    return;
                }

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const explanation = result.candidates[0].content.parts[0].text;
                    verseExplanationDiv.textContent = explanation;
                } else if (result.promptFeedback && result.promptFeedback.blockReason) {
                    console.error('AI response blocked (Verse Explainer):', result.promptFeedback);
                    verseExplanationDiv.textContent = `Explanation generation was blocked. (Reason: ${result.promptFeedback.blockReason}).`;
                } else {
                    console.error('Unexpected AI response structure (Verse Explainer):', result);
                    verseExplanationDiv.textContent = "Sorry, an unexpected error occurred while fetching the explanation.";
                }
                verseExplanationDiv.classList.remove('hidden');

            } catch (error) {
                console.error('Error calling Gemini API (Verse Explainer):', error);
                verseExplanationDiv.textContent = 'Failed to connect to the explanation service. Please check your internet connection.';
                verseExplanationDiv.classList.remove('hidden');
            } finally {
                verseExplainerLoadingIndicator.classList.add('hidden');
                explainVerseBtn.disabled = false;
            }
        }

        if (explainVerseBtn) {
            explainVerseBtn.addEventListener('click', getVerseExplanationFromAI);
        }

        // --- Google Translate ---
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>
