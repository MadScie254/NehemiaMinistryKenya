<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nehemia Ministry Kenya - A Sanctuary of Faith, Hope, and Love</title>
    <meta name="description" content="Welcome to the heart of Nehemia Ministry Kenya, founded by Bishop David Walukhu and Reverend Selina Walukhu. Discover a vibrant spiritual home in Mukhonje, Kakamega, offering profound spiritual guidance, transformative community services including our esteemed hospital, nurturing orphanage, and empowering training institute. Join our congregation for uplifting worship, engaging events, innovative AI-powered spiritual tools, and a continuous stream of daily inspiration.">
    <meta name="keywords" content="Nehemia Ministry, Kenya, Church, Kakamega, Mukhonje, Bishop David Walukhu, Selina Walukhu, Christian Ministry, Faith, Hope, Love, Spiritual Guidance, Hospital, Orphanage, Training Institute, Sermons, Events, Online Giving, Prayer Wall, Bible Study, Daily Devotion, AI Spiritual Tools, Youth Conference, Christian Community Kenya, Testimonials, Bible Story Generator, Discussion Starter">

    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden; 
            scroll-behavior: smooth;
            background-color: #f8f9fa; /* A very light, soft off-white for the body */
        }
        h1, h2, h3, h4, h5, h6, .font-lora {
            font-family: 'Lora', serif;
        }
        .font-inter {
            font-family: 'Inter', sans-serif;
        }
        .font-dancing-script {
            font-family: 'Dancing Script', cursive;
        }

        /* Preloader styles */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            z-index: 99999; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease-in-out; /* Slightly longer fade for grace */
        }
        #preloader-text {
            margin-top: 20px;
            font-size: 1.3rem; /* Slightly larger */
            color: #4A5568; /* Tailwind gray-600 */
            font-family: 'Lora', serif;
            opacity: 0;
        }

        /* GSAP animation helper */
        .gsap-reveal, .gsap-reveal-card {
            opacity: 0;
            transform: translateY(70px); /* A bit more pronounced reveal */
        }
        
        .active-nav-link {
            color: #D97706 !important; /* Tailwind amber-600 for a richer gold */
            font-weight: 700 !important;
            border-bottom: 3px solid #D97706; /* Thicker underline */
            padding-bottom: 4px; /* Adjust padding for underline */
        }
        .navbar-custom-bg {
            background-color: rgba(255, 255, 255, 0.92); /* More opacity for clarity */
            backdrop-filter: blur(15px); 
            transition: background-color 0.4s ease-in-out, box-shadow 0.4s ease-in-out;
            border-bottom: 1px solid rgba(0,0,0,0.05); /* Subtle separator */
        }
        .navbar-scrolled {
            background-color: rgba(255, 255, 255, 0.98);
            box-shadow: 0 6px 12px -2px rgba(0, 0, 0, 0.1), 0 3px 7px -3px rgba(0, 0, 0, 0.06) !important; /* Softer, more spread shadow */
        }

        @media (max-width: 991.98px) {
            .navbar-nav {
                background-color: #fff;
                padding: 1.25rem; /* More padding */
                border-radius: 0.75rem; /* More rounded */
                box-shadow: 0 15px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.05);
                margin-top: 0.75rem;
            }
            .nav-item { margin-bottom: 0.75rem; }
        }
        
        .modal-backdrop.show { opacity: 0.6 !important; } /* Slightly darker backdrop */
        .modal-content { 
            border-radius: 1rem; /* More rounded modals */
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25); 
            border: none;
        }
        
        #bibleVerseContainer { 
            min-height: 140px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            position: relative; 
            overflow: hidden; 
        }
        .verse-slide { 
            transition: opacity 0.8s ease-in-out, transform 0.8s ease-in-out;
            position: absolute; 
            width: 90%; /* Prevent text touching edges */
            text-align: center;
            padding: 10px;
        }
        .verse-slide p:first-child { font-size: 1.15rem; line-height: 1.6; } /* Main verse text */
        .verse-slide p:last-child { font-size: 0.95rem; } /* Reference text */


        #weather-widget { min-height: 90px; }

        .hero-title-gradient {
            background-image: linear-gradient(to right, #FBBF24, #F59E0B, #D97706, #B45309); /* Richer gold to deep orange gradient */
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 1px 2px 4px rgba(0,0,0,0.25); /* Slightly stronger shadow */
        }

        .countdown-item {
            background-color: rgba(255, 255, 255, 0.15); /* Slightly more opaque */
            backdrop-filter: blur(8px);
            padding: 1.25rem 1.75rem;
            border-radius: 0.75rem; /* More rounded */
            text-align: center;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        .countdown-number {
            font-size: 3rem; 
            font-weight: 700;
            line-height: 1;
            color: #FCD34D; /* Brighter yellow */
        }
        .countdown-label {
            font-size: 1rem;
            text-transform: uppercase;
            color: #F3F4F6; /* Lighter gray */
            margin-top: 0.5rem;
        }

        .ai-tool-card {
            background-color: rgba(255, 255, 255, 0.07); /* Slightly more visible */
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            display: flex;
            flex-direction: column;
            height: 100%; /* Ensure cards in a row have same height */
        }
        .ai-tool-card .ai-output {
            flex-grow: 1; /* Make output div take remaining space */
        }
        .ai-output {
            background-color: rgba(0,0,0,0.25);
            border-left: 4px solid #D97706; /* Richer amber accent */
        }
        
        /* Section background for a "holy" touch */
        .bg-holy-gradient {
            background: linear-gradient(135deg, #E0E7FF 0%, #C7D2FE 50%, #A5B4FC 100%); /* Soft lavender to indigo gradient */
        }
        .bg-divine-white {
            background-color: #FFFEFC; /* A very warm, almost imperceptible off-white */
        }
        .card-holy-glow {
            box-shadow: 0px 8px 25px rgba(128, 128, 224, 0.15), 0px 0px 10px rgba(245, 158, 11, 0.1); /* Soft purple and gold glow */
            transition: all 0.3s ease-in-out;
        }
        .card-holy-glow:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0px 12px 35px rgba(128, 128, 224, 0.2), 0px 0px 15px rgba(245, 158, 11, 0.15);
        }
        .section-title-holy {
            font-family: 'Dancing Script', cursive;
            color: #B45309; /* Deep Amber */
            font-size: 2.5rem; /* Make it prominent */
        }
        .section-subtitle-holy {
            font-family: 'Lora', serif;
            font-style: italic;
            color: #4B5563; /* Gray-600 */
        }
        .refresh-button {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 50%;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            line-height: 1;
        }
        .refresh-button:hover {
            background: rgba(255,255,255,0.4);
            transform: rotate(90deg) scale(1.1);
        }
        .testimonial-card {
            background-color: #ffffff;
            border-left: 5px solid #FBBF24; /* Amber accent */
        }

    </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">

    <div id="preloader">
        <lottie-player src="asset/loader.json" background="transparent" speed="1" style="width: 250px; height: 250px;" loop autoplay></lottie-player>
        <p id="preloader-text" class="text-center">Loading...</p>
    </div>

    <header x-data="{ mobileMenuOpen: false }" id="main-navbar" class="sticky top-0 z-[1000] w-full navbar-custom-bg"> {/* Increased z-index for navbar */}
        <nav class="container mx-auto px-4 lg:px-8 navbar navbar-expand-lg">
            <a class="navbar-brand py-2" href="index.html">
                <img src="asset/logo.png" alt="Nehemia Ministry Logo" class="h-12 md:h-16 transition-all duration-300 hover:opacity-80">
            </a>
            <button @click="mobileMenuOpen = !mobileMenuOpen" class="navbar-toggler lg:hidden" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav items-center space-x-0 lg:space-x-2 xl:space-x-4">
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="about.html">Our Journey</a></li>
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="sermons.html">The Word</a></li>
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="events.html">Fellowship</a></li>
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="ministries.html">Our Service</a></li>
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="gallery.html">Moments</a></li>
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="prayer-wall.html">Prayer Altar</a></li>
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="give.html">Giving Heart</a></li>
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="blog.html">Reflections</a></li>
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="contact.html">Connect</a></li>
                    <li class="nav-item"><a class="nav-link px-3 py-2 text-gray-700 hover:text-amber-600 font-medium" href="branches.html">Our Branches</a></li>
                    <li class="nav-item ms-lg-2 mt-2 mt-lg-0">
                        <div id="google_translate_element" class="h-8"></div>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <section id="hero" class="relative bg-cover bg-center min-h-[90vh] md:min-h-screen flex items-center justify-center text-white" style="background-image: url('asset/background-hero.jpg');">
            <div class="absolute inset-0 bg-gradient-to-br from-black/75 via-black/50 to-black/75"></div> {/* Enhanced gradient for depth */}
            <div class="relative z-10 text-center p-6 max-w-5xl"> {/* Increased max-width */}
                <h1 id="hero-title" class="text-5xl sm:text-6xl md:text-8xl font-bold mb-8 font-lora leading-tight hero-title-gradient opacity-0">Welcome to the Heart of Nehemia Ministry Kenya</h1>
                <p id="gsap-typewriter-phrases" class="text-2xl sm:text-3xl md:text-4xl mb-10 font-light min-h-[3.5em] gsap-reveal font-lora italic" data-gsap-delay="0.3">
                    </p>
                <div class="gsap-reveal" data-gsap-delay="0.6">
                  <a href="about.html" class="bg-amber-600 hover:bg-amber-700 text-white font-bold py-4 px-10 rounded-lg text-xl transition duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">Embark on Our Journey</a>
                </div>
                <div id="hero-verse-moment" class="mt-12 text-xl md:text-2xl bg-black/40 backdrop-blur-md p-6 rounded-xl max-w-3xl mx-auto gsap-reveal shadow-lg" data-gsap-delay="0.9">
                    <div class="flex justify-between items-center mb-2">
                        <p class="font-dancing-script text-3xl text-amber-300">A Word for This Moment:</p>
                        <button id="refreshHeroVerseBtn" class="refresh-button" aria-label="Refresh Bible Verse">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <p id="dynamic-bible-verse" class="mt-1 min-h-[2.5em] text-gray-100">Loading divine inspiration...</p>
                </div>
            </div>
        </section>

        <section id="pastors-welcome" class="py-16 md:py-24 bg-divine-white">
            <div class="container mx-auto px-6 lg:px-8">
                <p class="section-title-holy text-center mb-4 gsap-reveal">A Warm Embrace</p>
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800 text-center mb-10 font-lora gsap-reveal">From Our Hearts to Yours</h2>
                <div class="max-w-4xl mx-auto grid md:grid-cols-3 gap-8 items-center gsap-reveal" data-gsap-delay="0.2">
                    <div class="md:col-span-1 flex justify-center">
                        <img src="https://placehold.co/300x350/E2E8F0/4A5568?text=Bishop+&+Rev+Walukhu" alt="Bishop David and Rev Selina Walukhu" class="rounded-xl shadow-2xl w-full max-w-xs object-cover card-holy-glow">
                    </div>
                    <div class="md:col-span-2 text-lg text-gray-700 space-y-6 leading-relaxed">
                        <p class="italic text-xl text-amber-700 font-lora">"Grace and peace be multiplied to you!"</p>
                        <p>It is with immense joy and heartfelt warmth that we, Bishop David Walukhu and Reverend Selina Walukhu, welcome you to the digital home of Nehemia Ministry Kenya. Since 2006, our deepest passion has been to see lives transformed by the love of Christ, to build a community rooted in faith, and to extend God's compassion to all.</p>
                        <p>Whether you are seeking spiritual guidance, a place to worship, or a community to call family, we believe you'll find a sanctuary here. Explore our site, discover our ministries, and feel the spirit of our loving congregation. We pray that you are blessed, encouraged, and drawn closer to God through your visit.</p>
                        <p>We eagerly look forward to connecting with you, either online or in person at our Mukhonje sanctuary. May God's richest blessings be upon you and yours.</p>
                        <p class="font-semibold text-gray-800">Bishop David & Rev. Selina Walukhu</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="about-snippet" class="py-20 md:py-32 bg-gray-50"> <!-- Slightly different background for variety -->
            <div class="container mx-auto px-6 lg:px-8 text-center">
                <p class="section-title-holy mb-4 gsap-reveal">Our Sacred Story</p>
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800 mb-10 font-lora gsap-reveal">A Tapestry of Faith, Woven with Unwavering Hope & Divine Love</h2>
                <div class="max-w-5xl mx-auto text-lg md:text-xl text-gray-700 space-y-8 leading-relaxed gsap-reveal" data-gsap-delay="0.2">
                    <p>In the year of our Lord 2006, amidst the gentle undulations of Mukhonje, nestled within the embrace of Kakamega County, a divine seed was planted. This was the genesis of Nehemia Ministry Kenya, a testament to the unwavering faith and visionary leadership of Bishop David Walukhu and his beloved wife, Reverend Selina Walukhu. Theirs was not a path chosen by human ambition, but a sacred pilgrimage embarked upon in obedience to a profound spiritual summons—a celestial whisper calling them to serve, to uplift, and to tirelessly illuminate the world with the transformative radiance of the Gospel.</p>
                    <p>What began as a humble fellowship, a small gathering of hearts yearning for God's presence, has, by the boundless grace of the Almighty, blossomed into a vibrant, sprawling spiritual family. Our roots, like those of an ancient, life-giving tree, are sunk deep into the fertile soil of immutable biblical truth. Our branches, ever-reaching, extend outwards, carrying the fruit of compassion and commitment, making a palpable, enduring difference in every life we are privileged to touch. The very architecture of our ministry is founded upon the unshakeable cornerstones of unwavering faith in our Lord and Savior Jesus Christ, a proactive and compassionate outreach that mirrors His love for humanity, and an unyielding, passionate pursuit of manifesting God's glorious kingdom here on this terrestrial sphere.</p>
                    <p>We believe, with every fiber of our being, in the holistic cultivation of spiritual maturity, the intentional weaving of a tapestry of genuine, heartfelt community, and the Christ-like extension of a hand of solace and support to those navigating the often-turbulent seas of life. From our spiritual epicenter in Mukhonje, the divine vision entrusted to our founders has magnificently unfurled, its benevolent influence rippling through countless souls, a testament to God's enduring faithfulness. This sacred impact is brought to life through a rich and diverse mosaic of initiatives: from the quiet intimacy of personal spiritual guidance and dedicated discipleship programs that sculpt souls for eternity, to comprehensive community development projects that address the temporal needs of our people. Our devoted ministerial arms courageously and tirelessly minister to both the spiritual hunger that gnaws at the soul and the tangible, physical necessities that challenge the body.</p>
                    <p>Therefore, with hearts wide open and spirits alight with welcome, we extend to you a most earnest and heartfelt invitation: come, delve into the sacred narrative of our journey. Understand the breadth and depth of our God-ordained mission. Discover the manifold, grace-suffused ways in which we are, hand in hand, collaboratively laboring to construct a stronger, more devout, and more loving community—all under the benevolent canopy of God's infinite grace, and perpetually sustained by the fervent intercessions and unwavering support of our cherished, ever-growing congregation. This is more than a ministry; it is a movement of the Spirit, a sanctuary for the seeking, and a home for all who yearn for truth and love.</p>
                </div>
                <div class="mt-16 gsap-reveal" data-gsap-delay="0.4">
                    <a href="about.html" class="bg-blue-700 hover:bg-blue-800 text-white font-bold py-4 px-10 rounded-lg text-xl transition duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">Uncover Our Full Narrative</a>
                </div>
            </div>
        </section>
        
        <section id="core-beliefs" class="py-20 md:py-32 bg-holy-gradient">
            <div class="container mx-auto px-6 lg:px-8">
                <p class="section-title-holy text-center mb-4 gsap-reveal">Pillars of Our Faith</p>
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 text-center mb-16 font-lora gsap-reveal">The Unshakeable Truths That Guide Us</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-10">
                    {[
                        {icon: "fa-bible", title: "The Holy Scriptures", delay: "0", text: "We reverently hold the Bible, in its glorious entirety, to be the divinely inspired, infallible, inerrant, and authoritative Word of God. It is the ultimate compass for our faith, the very blueprint for a life lived in devotion and obedience to our Creator, a timeless treasure offering wisdom for every generation."},
                        {icon: "fa-trinity", title: "The Triune Godhead", delay: "0.1", text: "We worship and adore the One True God, eternally existing in three co-equal, co-eternal, and co-glorious Persons: God the Father, the benevolent Creator of all; God the Son, Jesus Christ, our Redeemer and Lord; and God the Holy Spirit, our Comforter, Guide, and Sanctifier."},
                        {icon: "fa-cross", title: "Redemption in Christ", delay: "0.2", text: "We joyfully proclaim that salvation, the forgiveness of our sins and the promise of eternal life, is a free gift of God's immeasurable grace, received solely through personal faith in Jesus Christ. His sacrificial, atoning death on the cross and triumphant resurrection are the bedrock of our hope and redemption."},
                        {icon: "fa-church", title: "The Body of Christ", delay: "0.05", text: "We cherish the Church as the living, breathing Body of Christ on earth—a divine assembly of redeemed believers, called out from the world to fervently worship God, to lovingly edify and nurture one another in the faith, and to courageously proclaim the life-transforming Gospel to every nation, tribe, and tongue."},
                        {icon: "fa-hand-holding-heart", title: "Compassion in Action", delay: "0.15", text: "We are compelled by God's love to be His hands and feet in a hurting world. We believe in demonstrating this divine love through tangible acts of service and mercy, diligently addressing the spiritual, physical, emotional, and social needs of our community and beyond, reflecting the compassionate heart of our Savior."},
                        {icon: "fa-dove", title: "The Empowering Spirit", delay: "0.25", text: "We celebrate the vibrant, ongoing ministry of the Holy Spirit. We believe He indwells every believer upon conversion, sealing them for the day of redemption, and graciously empowering them with spiritual gifts for godly living, dedicated service, and bold, effective witness in a world that desperately needs His light."}
                    ].map(belief => `
                    <div class="bg-white rounded-2xl p-8 card-holy-glow gsap-reveal-card" data-gsap-delay="${belief.delay}">
                        <div class="flex items-center mb-5">
                            <i class="fas ${belief.icon} fa-3x text-amber-500 mr-5"></i>
                            <h3 class="text-2xl md:text-3xl font-semibold text-blue-700 font-lora">${belief.title}</h3>
                        </div>
                        <p class="text-gray-700 leading-relaxed text-lg">${belief.text}</p>
                    </div>
                    `).join('')}
                </div>
            </div>
        </section>

        <section id="ministries-overview" class="py-20 md:py-32 bg-divine-white">
            <div class="container mx-auto px-6 lg:px-8">
                 <p class="section-title-holy text-center mb-4 gsap-reveal">Our Hands & Feet</p>
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800 text-center mb-16 font-lora gsap-reveal">Extending God's Love: Our Core Ministries of Service</h2>
                <div class="grid md:grid-cols-3 gap-10">
                    {[
                        {img: "asset/hospital.jpg", alt: "Kingdom Faith-Based Hospital: A place of healing and hope", title: "Kingdom Faith-Based Hospital", delay: "0", text: "More than a mere medical facility, the Kingdom Faith-Based Hospital stands as a sanctuary of healing, where Christ's compassionate touch is extended to every patient. We are dedicated to providing accessible, high-quality, and holistic healthcare services, addressing not only physical ailments but also offering spiritual solace and fostering the complete well-being of every individual and family within our cherished community. Here, science and faith converge to bring restoration and hope."},
                        {img: "asset/matco.jpg", alt: "Matco Training Institute: Empowering through skills and knowledge", title: "Matco Training Institute (Malaha)", delay: "0.1", text: "At the Matco Training Institute in Malaha, we are passionately committed to unlocking human potential. We empower individuals from all walks of life by imparting practical vocational skills, instilling sound biblical principles for life and work, and cultivating entrepreneurial knowledge. Our aim is to equip our students not just for employment, but for sustainable livelihoods, impactful personal growth, and a future where they can be agents of positive change in their communities."},
                        {img: "asset/orphanage.jpg", alt: "New Promise Orphanage: A loving home for children", title: "New Promise Orphanage (Lwandeti)", delay: "0.2", text: "The New Promise Orphanage in Lwandeti is a haven of love, a testament to God's tender care for the vulnerable. We provide a nurturing, Christ-centered home environment, offering comprehensive care, quality education, and unwavering emotional support to orphaned and vulnerable children. Our deepest desire is to cultivate their God-given potential, instilling in them a sense of worth, purpose, and the promise of a bright, hope-filled future."}
                    ].map(ministry => `
                    <div class="bg-white rounded-2xl shadow-xl p-8 text-center card-holy-glow gsap-reveal-card" data-gsap-delay="${ministry.delay}">
                        <img src="${ministry.img}" alt="${ministry.alt}" class="w-full h-64 object-cover rounded-xl mb-8 shadow-lg" onerror="this.onerror=null;this.src='https://placehold.co/600x400/E2E8F0/4A5568?text=Ministry+Image';">
                        <h3 class="text-2xl md:text-3xl font-semibold text-blue-700 mb-4 font-lora">${ministry.title}</h3>
                        <p class="text-gray-700 mb-6 leading-relaxed text-lg">${ministry.text}</p>
                    </div>
                    `).join('')}
                </div>
                <div class="text-center mt-20 gsap-reveal" data-gsap-delay="0.3">
                    <a href="ministries.html" class="bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-12 rounded-lg text-xl transition duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">Discover Our Service in Detail</a>
                </div>
            </div>
        </section>

        <section id="mega-conference-countdown" class="py-20 md:py-32 bg-gradient-to-br from-purple-800 via-indigo-800 to-blue-900 text-white"> {/* Darker, richer gradient */}
            <div class="container mx-auto px-6 lg:px-8 text-center">
                <p class="font-dancing-script text-4xl text-yellow-300 mb-4 gsap-reveal">Join the Excitement!</p>
                <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 font-lora gsap-reveal">Anticipate with Us!</h2>
                <p class="text-xl md:text-2xl text-purple-200 mb-12 gsap-reveal" data-gsap-delay="0.15">The Grand Countdown to Our Annual</p>
                <h3 class="text-5xl md:text-6xl lg:text-7xl font-bold mb-12 font-lora text-yellow-400 gsap-reveal" data-gsap-delay="0.3">Mega Inter-denominational Youth Conference</h3>
                <div id="countdown-timer" class="grid grid-cols-2 sm:grid-cols-4 gap-5 md:gap-8 max-w-4xl mx-auto gsap-reveal" data-gsap-delay="0.45">
                    <div class="countdown-item"><div id="days" class="countdown-number">00</div><div class="countdown-label">Days</div></div>
                    <div class="countdown-item"><div id="hours" class="countdown-number">00</div><div class="countdown-label">Hours</div></div>
                    <div class="countdown-item"><div id="minutes" class="countdown-number">00</div><div class="countdown-label">Minutes</div></div>
                    <div class="countdown-item"><div id="seconds" class="countdown-number">00</div><div class="countdown-label">Seconds</div></div>
                </div>
                <p class="mt-16 text-xl text-purple-200 gsap-reveal" data-gsap-delay="0.6">Prepare your hearts! Annually commencing on <strong class="text-yellow-300 font-semibold">December 9th</strong>. A divine appointment for worship, the Word, and life-changing fellowship awaits every young soul!</p>
            </div>
        </section>

        <section id="daily-inspiration" class="py-20 md:py-32 bg-gradient-to-br from-sky-800 via-cyan-800 to-teal-900 text-white"> {/* Deep teal/blue gradient */}
            <div class="container mx-auto px-6 lg:px-8">
                <p class="font-dancing-script text-4xl text-center text-sky-300 mb-4 gsap-reveal">Spiritual Nourishment</p>
                <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-center mb-16 font-lora gsap-reveal">A Fountain of Daily Divine Inspiration</h2>
                <div class="grid lg:grid-cols-3 gap-10 items-start">
                    <div class="bg-white/10 backdrop-blur-lg p-8 rounded-2xl shadow-xl card-holy-glow gsap-reveal-card h-full">
                        <h3 class="text-3xl font-semibold mb-6 font-lora text-sky-300 flex items-center"><i class="fas fa-book-open mr-3"></i>The Living Word</h3>
                        <div id="bibleVerseContainer" class="text-lg text-gray-100">
                             <!-- Verses will be injected here by JS -->
                        </div>
                    </div>

                    <div class="bg-white/10 backdrop-blur-lg p-8 rounded-2xl shadow-xl card-holy-glow gsap-reveal-card h-full" data-gsap-delay="0.15">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-3xl font-semibold font-lora text-sky-300 flex items-center"><i class="fas fa-lightbulb mr-3"></i>A Thought for Today</h3>
                            <button id="refreshQuoteBtn" class="refresh-button" aria-label="Refresh Inspirational Quote">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div id="inspirational-quote-container" class="mb-8 min-h-[100px]">
                            <p id="inspirational-quote" class="text-xl italic text-gray-100 leading-relaxed">Fetching an uplifting quote...</p>
                            <p id="quote-author" class="text-md text-right mt-3 text-gray-300"></p>
                        </div>
                         <button type="button" class="w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 px-6 rounded-lg text-lg transition duration-300 transform hover:scale-105 shadow-lg" data-bs-toggle="modal" data-bs-target="#devotionModal">
                            <i class="fas fa-pray mr-2"></i> Receive Your Daily Devotion
                        </button>
                    </div>

                    <div id="weather-widget-container" class="bg-white/10 backdrop-blur-lg p-8 rounded-2xl shadow-xl card-holy-glow gsap-reveal-card h-full" data-gsap-delay="0.3">
                        <h3 class="text-3xl font-semibold mb-6 font-lora text-sky-300 flex items-center"><i class="fas fa-cloud-sun mr-3"></i>Kakamega's Skies</h3>
                        <div id="weather-widget" class="text-gray-100">
                            <p id="weather-loading" class="text-lg">Loading current weather...</p>
                             <!-- Weather API Key Needed: Please replace the empty `weatherApiKey` in the script with your OpenWeatherMap API key for this to function. -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="ai-guidance" class="py-20 md:py-32 bg-gray-900 text-white">
            <div class="container mx-auto px-6 lg:px-8">
                <p class="font-dancing-script text-4xl text-center text-amber-400 mb-4 gsap-reveal">Digital Discipleship Tools</p>
                <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-center mb-12 font-lora gsap-reveal">AI-Powered Spiritual Companions</h2>
                <p class="text-center text-lg text-gray-300 mb-16 max-w-4xl mx-auto leading-relaxed gsap-reveal" data-gsap-delay="0.1">
                    Embark on a unique journey of faith and scriptural understanding with our innovative AI-assisted spiritual companions. These tools, powered by advanced generative technology, are designed to serve as humble aids on your path to deeper spiritual insight. 
                    We encourage you to engage with these responses prayerfully, always holding them against the timeless truth of God's Holy Word, and to use them as springboards for your own study and reflection.
                </p>

                <div class="grid md:grid-cols-1 lg:grid-cols-2 gap-10 xl:gap-12">
                    {[
                        {idPrefix: "sermonTopics", title: "Sermon Spark", icon: "fa-microphone-alt", label: "Enter keywords for sermon ideas (e.g., \"divine grace, forgiveness\"):", placeholder: "e.g., Enduring Faith, Hope's Anchor", buttonText: "Ignite Sermon Ideas", outputText: "Awaiting your keywords to spark divine inspiration... Share a theme, and let's discover together!"},
                        {idPrefix: "bibleAnswer", title: "Scripture Seeker", icon: "fa-book-reader", label: "Pose your Bible-related question:", placeholder: "e.g., What is the essence of John 3:16?", buttonText: "Seek Biblical Answers", outputText: "Pose your query to the Scriptures. Wisdom awaits your seeking."},
                        {idPrefix: "prayer", title: "Prayer Weaver", icon: "fa-hands-praying", label: "Describe your prayer intention or need:", placeholder: "e.g., For divine strength in trials...", buttonText: "Weave a Heartfelt Prayer", outputText: "Share your heart's burden or joy. A prayer tailored for you will emerge."},
                        {idPrefix: "storyGen", title: "Bible Story Weaver", icon: "fa-feather-alt", label: "Enter a theme or character(s) for a Bible-style story:", placeholder: "e.g., Courage, David & Goliath, A story of forgiveness", buttonText: "Weave a Story", outputText: "What theme or characters inspire you today? Let's craft a narrative."},
                        {idPrefix: "discussionStarter", title: "Study Igniter", icon: "fa-users-line", label: "Enter a Bible passage for discussion questions (e.g., John 15:1-8):", placeholder: "e.g., Ephesians 2:8-10", buttonText: "Spark Discussion", outputText: "Provide a passage, and let's generate questions to deepen understanding."}
                    ].map((tool, index) => `
                    <div class="ai-tool-card p-8 rounded-2xl shadow-2xl card-holy-glow gsap-reveal-card" data-gsap-delay="${(index * 0.1) + 0.2}">
                        <h3 class="text-3xl font-semibold mb-6 font-lora text-amber-400 flex items-center"><i class="fas ${tool.icon} mr-3"></i>${tool.title}</h3>
                        <div class="mb-5">
                            <label for="${tool.idPrefix}Input" class="form-label text-gray-300 text-md">${tool.label}</label>
                            <textarea class="form-control bg-gray-700 text-white border-gray-600 p-3 rounded-lg focus:ring-amber-500 focus:border-amber-500 w-full mt-2" id="${tool.idPrefix}Input" rows="3" placeholder="${tool.placeholder}"></textarea>
                        </div>
                        <button id="${tool.idPrefix}Btn" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition duration-300 transform hover:scale-105 shadow-lg">
                            ${tool.buttonText}
                            <span id="${tool.idPrefix}Spinner" class="spinner-border spinner-border-sm text-white ms-2 d-none" role="status"><span class="visually-hidden">Loading...</span></span>
                        </button>
                        <div id="${tool.idPrefix}Output" class="mt-6 p-5 rounded-lg min-h-[120px] ai-output text-gray-200 text-md leading-relaxed">
                            <p class="italic text-gray-400">${tool.outputText}</p>
                        </div>
                    </div>
                    `).join('')}
                </div>
            </div>
        </section>

        <section id="events-preview" class="py-20 md:py-32 bg-divine-white">
            <div class="container mx-auto px-6 lg:px-8">
                <p class="section-title-holy text-center mb-4 gsap-reveal">Come Fellowship</p>
                <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-800 text-center mb-16 font-lora gsap-reveal">Gather with Us: Upcoming Kingdom Events</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-10">
                    {[
                        {img: "https://placehold.co/600x400/C4B5FD/4338CA?text=Youth+Empowerment+Gala", alt: "Youth Empowerment Gala", title: "Annual Youth Empowerment Gala", date: "August 15-17, 2024", location: "Main Church Sanctuary, Mukhonje", desc: "An electrifying and spiritually charged weekend meticulously designed for fellowship, dynamic worship, and profound transformative growth for our vibrant and cherished young generation. Expect miracles!"},
                        {img: "https://placehold.co/600x400/A5F3FC/0E7490?text=Community+Healing+Fair", alt: "Community Healing & Wellness Fair", title: "Community Healing & Wellness Fair", date: "September 5, 2024", location: "Mukhonje Market Grounds", desc: "Extending God's healing hand through free health screenings, holistic wellness education, and vital awareness programs, in blessed partnership with our Kingdom Faith-Based Hospital."},
                        {img: "https://placehold.co/600x400/FDE68A/78350F?text=Glory+Night+Worship", alt: "Glory Night of Worship", title: "Glory Night of Worship Encounter", date: "Last Friday of Every Month", location: "Main Church Auditorium", desc: "A sacred evening wholly consecrated to uninhibited, heartfelt praise, intimate worship that touches heaven, and profound spiritual rejuvenation. All are joyfully invited to bask in God's glorious presence."}
                    ].map(event => `
                    <div class="bg-white rounded-2xl shadow-xl p-8 card-holy-glow gsap-reveal-card" data-gsap-delay="${event.delay || 0}">
                        <img src="${event.img}" alt="${event.alt}" class="w-full h-56 object-cover rounded-xl mb-6 shadow-lg">
                        <h3 class="text-2xl font-semibold text-teal-700 mb-3 font-lora">${event.title}</h3>
                        <p class="text-gray-600 text-md mb-2"><i class="fas fa-calendar-alt mr-2 text-teal-600"></i>${event.date}</p>
                        <p class="text-gray-600 text-md mb-4"><i class="fas fa-map-marker-alt mr-2 text-teal-600"></i>${event.location}</p>
                        <p class="text-gray-700 leading-relaxed text-lg">${event.desc}</p>
                    </div>
                    `).join('')}
                </div>
                <div class="text-center mt-20 gsap-reveal" data-gsap-delay="0.3">
                    <a href="events.html" class="bg-purple-700 hover:bg-purple-800 text-white font-bold py-4 px-12 rounded-lg text-xl transition duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">Explore All Our Gatherings</a>
                </div>
            </div>
        </section>
        
        <section id="testimonials" class="py-20 md:py-32 bg-gray-50">
            <div class="container mx-auto px-6 lg:px-8">
                <p class="section-title-holy text-center mb-4 gsap-reveal">Voices of Faith</p>
                <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-800 text-center mb-16 font-lora gsap-reveal">Lives Touched by Grace</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-10">
                    {[
                        { quote: "Nehemia Ministry has been a true beacon of hope for my family. The teachings are life-changing, and the community is so welcoming. I've found my spiritual home here.", name: "Grace M.", avatar: "https://placehold.co/80x80/A7F3D0/047857?text=GM", delay: "0" },
                        { quote: "Through the Matco Training Institute, I gained skills that helped me start my own business. I'm so grateful for the practical and spiritual guidance I received.", name: "John K.", avatar: "https://placehold.co/80x80/BAE6FD/0C4A6E?text=JK", delay: "0.1" },
                        { quote: "The love and care shown at the New Promise Orphanage is truly Christ-like. It's inspiring to see how this ministry is making a difference in the lives of these precious children.", name: "Sarah W., Volunteer", avatar: "https://placehold.co/80x80/DDD6FE/4C1D95?text=SW", delay: "0.2" }
                    ].map(testimonial => `
                    <div class="testimonial-card rounded-xl shadow-xl p-8 card-holy-glow gsap-reveal-card" data-gsap-delay="${testimonial.delay}">
                        <p class="text-gray-700 text-lg italic leading-relaxed mb-6">"${testimonial.quote}"</p>
                        <div class="flex items-center">
                            <img src="${testimonial.avatar}" alt="Testimonial from ${testimonial.name}" class="w-16 h-16 rounded-full mr-4 object-cover">
                            <div>
                                <h4 class="font-semibold text-gray-800 font-lora text-xl">${testimonial.name}</h4>
                                <p class="text-sm text-amber-600">Member / Beneficiary</p>
                            </div>
                        </div>
                    </div>
                    `).join('')}
                </div>
                <div class="text-center mt-16 gsap-reveal" data-gsap-delay="0.3">
                    <a href="contact.html?subject=Share My Testimony" class="bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 px-8 rounded-lg text-lg transition duration-300 transform hover:scale-105 shadow-lg">Share Your Story of Grace</a>
                </div>
            </div>
        </section>

        <section id="sermon-highlight" class="py-20 md:py-32 bg-gray-900 text-white">
            <div class="container mx-auto px-6 lg:px-8">
                <p class="font-dancing-script text-4xl text-center text-amber-400 mb-4 gsap-reveal">Heavenly Manna</p>
                <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-center mb-16 font-lora gsap-reveal">A Word in Season: Message of the Week</h2>
                <div class="max-w-4xl mx-auto bg-black rounded-2xl shadow-2xl overflow-hidden gsap-reveal" data-gsap-delay="0.2">
                    <div class="aspect-w-16 aspect-h-9">
                        <video controls poster="https://placehold.co/1280x720/1F2937/E5E7EB?text=Sermon+Video+Highlight" class="w-full h-full object-cover" preload="metadata">
                            <source src="asset/videos/sermon1.mp4" type="video/mp4">
                            Your browser does not support the video tag. We invite you to <a href="asset/videos/sermon1.mp4" class="text-amber-400 hover:underline">download the video</a> to experience this blessing.
                        </video>
                    </div>
                </div>
                 <div class="text-center mt-16 gsap-reveal" data-gsap-delay="0.3">
                    <p class="text-xl lg:text-2xl mb-10 leading-relaxed max-w-3xl mx-auto text-gray-300">Immerse your spirit in the life-giving streams of God's Word. Experience these uplifting and transformative messages, divinely orchestrated to inspire, challenge, and bless your soul. Watch our latest sermon highlight.</p>
                    <a href="sermons.html" class="bg-amber-600 hover:bg-amber-700 text-white font-bold py-4 px-12 rounded-lg text-xl transition duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">Hear More Anointed Messages</a>
                </div>
            </div>
        </section>

        <section id="location" class="py-20 md:py-32 bg-divine-white">
            <div class="container mx-auto px-6 lg:px-8">
                <p class="section-title-holy text-center mb-4 gsap-reveal">Find Your Way Home</p>
                <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-800 text-center mb-16 font-lora gsap-reveal">Connect With Us: Visit Our Mukhonje Sanctuary</h2>
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div class="gsap-reveal" data-gsap-delay="0.1">
                        <h3 class="text-3xl lg:text-4xl font-semibold text-gray-800 mb-8 font-lora">Nehemia Ministry - Main Church, Mukhonje</h3>
                        <p class="text-gray-700 mb-4 text-xl flex items-start"><i class="fas fa-map-marked-alt mr-4 text-amber-600 mt-1 text-2xl"></i><span>Mukhonje Market, Along Webuye - Eldoret Highway, Kakamega County, Kenya</span></p>
                        <p class="text-gray-700 mb-4 text-xl flex items-center"><i class="fas fa-phone-volume mr-4 text-amber-600 text-2xl"></i><span>+254 7XX XXX XXX (Church Office)</span></p>
                        <p class="text-gray-700 mb-8 text-xl flex items-center"><i class="fas fa-envelope-open-text mr-4 text-amber-600 text-2xl"></i><span>info@nehemiaministry.org</span></p>
                        <p class="text-gray-700 leading-relaxed text-xl">We extend a most cordial and heartfelt invitation for you to join our vibrant services, to experience the unparalleled warmth of our fellowship, and to become an integral part of our ever-growing faith family. Our doors, much like our hearts, are perpetually open to welcome you into God's loving embrace.</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Nehemiah+Faith+Victory+Chapel%2C+Mukhonje+Market%2C+Webuye-Eldoret+Road" target="_blank" rel="noopener noreferrer" class="mt-10 inline-block bg-sky-600 hover:bg-sky-700 text-white font-bold py-4 px-10 rounded-lg text-xl transition duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">
                            <i class="fas fa-route mr-2"></i>Navigate to Our Sanctuary
                        </a>
                    </div>
                    <div class="rounded-2xl shadow-2xl overflow-hidden gsap-reveal h-[400px] md:h-[550px] card-holy-glow" data-gsap-delay="0.2">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3989.738090035002!2d34.8705899152195!3d0.3000689634819304!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1781d8f2e8f8f8f9%3A0x1e2f3d4c5b6a7b8c!2sNehemiah%20Faith%20Victory%20Chapel!5e0!3m2!1sen!2ske!4v1684700000000" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
                 <div class="text-center mt-20 gsap-reveal" data-gsap-delay="0.3">
                    <a href="contact.html" class="bg-indigo-700 hover:bg-indigo-800 text-white font-bold py-4 px-12 rounded-lg text-xl transition duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">Have Inquiries? Reach Out to Us</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-900 text-gray-300 py-16 md:py-24"> {/* Increased padding */}
        <div class="container mx-auto px-6 lg:px-8">
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12"> {/* Increased gap and margin-bottom */}
                <div class="gsap-reveal" data-gsap-delay="0">
                    <img src="asset/logo.png" alt="Nehemia Ministry Logo - Footer" class="h-20 mb-8 brightness-0 invert"> {/* Larger logo, more margin */}
                    <p class="mb-5 text-gray-400 leading-relaxed">A beacon of God's eternal light, faithfully spreading His boundless faith, nurturing His everlasting hope, and sharing His unconditional love with all humanity since our blessed inception in 2006.</p>
                    <p class="mb-4 flex items-start"><i class="fas fa-map-marker-alt mr-4 mt-1 text-amber-500 text-xl"></i><span class="text-gray-400">Mukhonje Market, Webuye-Eldoret Rd, Kakamega, Kenya</span></p>
                    <p class="mb-4 flex items-center"><i class="fas fa-phone-alt mr-4 text-amber-500 text-xl"></i><span class="text-gray-400">+254 7XX XXX XXX</span></p>
                    <p class="flex items-center"><i class="fas fa-envelope mr-4 text-amber-500 text-xl"></i><span class="text-gray-400">info@nehemiaministry.org</span></p>
                </div>
                <div class="gsap-reveal" data-gsap-delay="0.1">
                    <h5 class="text-2xl font-semibold text-white mb-8 font-lora">Navigate Our Sanctuary</h5> {/* Increased margin-bottom */}
                    <ul class="space-y-4"> {/* Increased spacing */}
                        <li><a href="about.html" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-lg">Our Sacred Journey & Vision</a></li>
                        <li><a href="sermons.html" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-lg">Treasures from The Word</a></li>
                        <li><a href="events.html" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-lg">Upcoming Kingdom Gatherings</a></li>
                        <li><a href="ministries.html" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-lg">Our Arms of Service</a></li>
                        <li><a href="give.html" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-lg">Sow into Good Ground</a></li>
                        <li><a href="branches.html" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-lg">Find a Fellowship Near You</a></li>
                         <li><a href="contact.html" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-lg">Connect With Our Hearts</a></li>
                    </ul>
                </div>
                <div class="gsap-reveal" data-gsap-delay="0.2">
                    <h5 class="text-2xl font-semibold text-white mb-8 font-lora">Stay Divinely Connected</h5> {/* Increased margin-bottom */}
                    <p class="mb-5 text-gray-400 leading-relaxed">Receive uplifting spiritual manna, ministry news, and blessed event invitations directly to your digital doorstep.</p>
                    <form action="#" method="POST" class="flex flex-col sm:flex-row">
                        <input type="email" name="email" placeholder="Your Email for Blessings" class="w-full px-5 py-4 rounded-lg sm:rounded-l-lg sm:rounded-r-none text-gray-800 focus:outline-none focus:ring-2 focus:ring-amber-500 mb-3 sm:mb-0 text-lg" required>
                        <button type="submit" class="bg-amber-600 hover:bg-amber-700 text-white px-8 py-4 rounded-lg sm:rounded-r-lg sm:rounded-l-none font-bold text-lg transition-colors duration-200">Subscribe</button>
                    </form>
                </div>
                <div class="gsap-reveal" data-gsap-delay="0.3">
                    <h5 class="text-2xl font-semibold text-white mb-8 font-lora">Follow Our Spiritual Journey</h5> {/* Increased margin-bottom */}
                    <div class="flex space-x-6"> {/* Increased spacing */}
                        <a href="#" aria-label="Facebook" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-4xl"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-4xl"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="YouTube" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-4xl"><i class="fab fa-youtube"></i></a>
                        <a href="#" aria-label="Instagram" class="text-gray-400 hover:text-amber-400 transition-colors duration-200 text-4xl"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-12 text-center"> {/* Increased padding-top */}
                <p class="text-gray-400 text-md">© <span id="currentYear"></span> Nehemia Ministry Kenya. All Rights Reserved in Christ.</p>
                <p class="text-sm mt-3 text-gray-500">Lovingly Designed, Divinely Inspired & Maintained by the Grace of God Almighty.</p>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="devotionModal" tabindex="-1" aria-labelledby="devotionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl"> {/* Larger modal */}
            <div class="modal-content bg-white shadow-xl rounded-lg">
                <div class="modal-header bg-gradient-to-r from-blue-700 to-indigo-800 text-white rounded-t-lg p-5">
                    <h5 class="modal-title text-3xl font-lora" id="devotionModalLabel"><i class="fas fa-book-sparkles mr-3"></i>Your Moment of Divine Reflection</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-8">
                    <div class="mb-6">
                        <label for="devotionTheme" class="form-label text-gray-700 text-lg">Optional: Inspire your devotion with a theme (e.g., "unwavering faith", "divine hope", "overflowing gratitude")</label>
                        <input type="text" class="form-control p-4 border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500 text-lg" id="devotionTheme" placeholder="e.g., Finding Strength in His Promises">
                    </div>
                    <button id="generateDevotionBtnModal" type="button" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-4 px-4 rounded-lg text-xl transition duration-300 transform hover:scale-105 shadow-lg mb-6">
                        <span id="devotionBtnTextModal">Generate My Personal Devotion</span>
                        <span id="devotionSpinnerModal" class="spinner-border spinner-border-sm text-white ms-2 d-none" role="status"><span class="visually-hidden">Loading...</span></span>
                    </button>
                    <div id="devotionResult" class="mt-5 p-6 bg-gray-50 rounded-lg border border-gray-200 min-h-[200px] text-lg leading-relaxed">
                        <p class="text-gray-500 italic">Prepare for a moment of reflection. Your personalized devotion is moments away...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.10/dist/cdn.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,sw,de,fr',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger, TextPlugin); 

        // IMPORTANT: Replace with your actual Gemini API Key
        const GEMINI_API_KEY = "AIzaSyCOyiZkk8t7zFtX4zC9G4v66MPJfgjIi84"; // Using the one from the file, ensure it's active and has permissions.

        document.addEventListener('DOMContentLoaded', function() {
            const preloader = document.getElementById('preloader');
            const preloaderText = document.getElementById('preloader-text');
            const welcomeMessages = [
                "Welcome to Nehemia Ministry...",
                "Preparing a spiritual haven...",
                "Connecting hearts to the Divine...",
                "Unveiling God's blessings...",
                "A moment away from grace..."
            ];
            let msgIndex = 0;
            let textInterval;

            if (preloader && preloaderText) {
                document.body.style.overflow = 'hidden'; 
                function showNextMessage() {
                    gsap.to(preloaderText, { opacity: 0, duration: 0.5, ease: "power1.in", onComplete: () => {
                        preloaderText.textContent = welcomeMessages[msgIndex];
                        gsap.to(preloaderText, { opacity: 1, duration: 0.5, ease: "power1.out" });
                        msgIndex = (msgIndex + 1) % welcomeMessages.length;
                    }});
                }
                showNextMessage(); 
                textInterval = setInterval(showNextMessage, 2200); 

                const lottiePlayer = preloader.querySelector('lottie-player');
                function hidePreloader() {
                    if (!preloader || preloader.style.opacity === "0" || preloader.style.display === 'none') return; 
                    
                    clearInterval(textInterval);
                    gsap.to(preloader, { 
                        opacity: 0, 
                        duration: 1.0, 
                        ease: "power2.inOut", 
                        onComplete: () => {
                            if (preloader) preloader.style.display = 'none';
                            document.body.style.overflow = ''; 
                            ScrollTrigger.refresh(); 
                            startHeroAnimations(); 
                        } 
                    });
                }

                if (lottiePlayer) {
                    let lottieReady = false;
                    lottiePlayer.addEventListener('ready', () => {
                        lottieReady = true;
                        setTimeout(hidePreloader, 500); 
                    });
                    setTimeout(() => {
                        if (!lottieReady) {
                            console.warn("Lottie 'ready' event timeout. Hiding preloader.");
                            hidePreloader();
                        }
                    }, 2500); 
                } else { 
                    setTimeout(hidePreloader, 1000);
                }
                window.addEventListener('load', () => setTimeout(hidePreloader, 3000) );

            } else {
                 document.body.style.overflow = ''; 
                 startHeroAnimations();
            }
            
            const navbar = document.getElementById('main-navbar');
            if (navbar) {
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 70) { 
                        navbar.classList.add('navbar-scrolled');
                    } else {
                        navbar.classList.remove('navbar-scrolled');
                    }
                });
            }
            
            gsap.utils.toArray('.gsap-reveal').forEach(function(elem) {
                gsap.fromTo(elem, 
                    { opacity: 0, y: 70 }, 
                    { 
                        opacity: 1, 
                        y: 0, 
                        duration: 1.2, 
                        ease: 'power3.out',
                        delay: parseFloat(elem.dataset.gsapDelay) || 0.1,
                        scrollTrigger: {
                            trigger: elem,
                            start: 'top 88%', 
                            end: 'bottom 15%',
                            toggleActions: 'play none none none', 
                            once: true 
                        }
                    }
                );
            });

            gsap.utils.toArray('.gsap-reveal-card').forEach(function(card, index) {
                gsap.fromTo(card, 
                    { opacity: 0, y: 60, scale: 0.95 }, 
                    {
                        opacity: 1,
                        y: 0,
                        scale: 1,
                        duration: 0.9, 
                        ease: 'power2.out',
                        delay: (parseFloat(card.dataset.gsapDelay) || 0) + (index % 3) * 0.18, 
                        scrollTrigger: {
                            trigger: card,
                            start: 'top 92%', 
                            once: true
                        }
                    }
                );
            });

            function startHeroAnimations() {
                const heroTitle = document.getElementById('hero-title');
                if(heroTitle){ 
                    gsap.fromTo(heroTitle, 
                        { opacity: 0, y: 50, scale: 0.9 },
                        {
                            opacity: 1,
                            y: 0,
                            scale: 1,
                            duration: 1.5, 
                            ease: "elastic.out(1, 0.65)", 
                            delay: 0.3 
                        }
                    );
                }

                const heroPhrases = [
                    "A Sanctuary of Faith, Where Hope Blossoms and Love Abounds.",
                    "Experience the Transforming Power of God's Unending Grace and Presence.",
                    "Journey with Us: Discovering Purpose, Deepening Faith, Building Community.",
                    "Echoes of Worship, Testimonies of Miracles, A Legacy of Love.",
                    "Where Heaven Touches Earth, and Every Soul Finds its Home."
                ];
                const typewriterElement = document.getElementById('gsap-typewriter-phrases');
                let currentPhraseIndex = 0;

                function typeNextPhrase() {
                    if (!typewriterElement) return;
                    gsap.to(typewriterElement, {
                        duration: heroPhrases[currentPhraseIndex].length * 0.07, 
                        text: {
                            value: heroPhrases[currentPhraseIndex],
                            type: "diff", 
                        },
                        ease: "power1.inOut",
                        onComplete: () => {
                            gsap.to(typewriterElement, { 
                                delay: 3, 
                                onComplete: () => {
                                    gsap.to(typewriterElement, { 
                                        duration: heroPhrases[currentPhraseIndex].length * 0.035,
                                        text: {value: "", type: "diff"},
                                        ease: "power1.inOut",
                                        onComplete: () => {
                                            currentPhraseIndex = (currentPhraseIndex + 1) % heroPhrases.length;
                                            typeNextPhrase(); 
                                        }
                                    });
                                }
                            });
                        }
                    });
                }
                if (typewriterElement && heroPhrases.length > 0) {
                     setTimeout(typeNextPhrase, 1500); 
                }
                fetchRandomBibleVerse(); 
            }

            const dynamicVerseElement = document.getElementById('dynamic-bible-verse');
            const refreshHeroVerseBtn = document.getElementById('refreshHeroVerseBtn');

            async function fetchRandomBibleVerse() {
                if (!dynamicVerseElement) return;
                dynamicVerseElement.innerHTML = `<span class="italic">Fetching a fresh word...</span>`;
                const verses = [ 
                    "John 3:16", "Philippians 4:13", "Proverbs 3:5-6", "Jeremiah 29:11", 
                    "Romans 8:28", "Isaiah 41:10", "Psalm 23:1", "1 Corinthians 10:13",
                    "Matthew 11:28", "Joshua 1:9", "Psalm 46:10", "Hebrews 11:1", "2 Timothy 1:7"
                ];
                const randomVerseRef = verses[Math.floor(Math.random() * verses.length)];
                try {
                    const response = await fetch(`https://bible-api.com/${randomVerseRef}?translation=kjv`);
                    if (!response.ok) throw new Error(`API request failed with status ${response.status}`);
                    const data = await response.json();
                    if (data && data.text) {
                        dynamicVerseElement.innerHTML = `"${data.text.trim()}" <span class="block text-md text-amber-400 mt-2">- ${data.reference} (KJV)</span>`;
                    } else {
                        dynamicVerseElement.textContent = "Could not load verse. Trust in the Lord always.";
                    }
                } catch (error) {
                    console.error("Error fetching Bible verse:", error);
                    dynamicVerseElement.textContent = "The Lord is my shepherd; I shall not want. - Psalm 23:1 (KJV)"; 
                }
            }
            if(refreshHeroVerseBtn) {
                refreshHeroVerseBtn.addEventListener('click', fetchRandomBibleVerse);
            }
            
            const bibleVerseContainer = document.getElementById('bibleVerseContainer');
            if (bibleVerseContainer) {
                const bibleVersesContent = [
                    "For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life. - John 3:16",
                    "I can do all things through him who strengthens me. - Philippians 4:13",
                    "Trust in the LORD with all your heart, and do not lean on your own understanding. In all your ways acknowledge him, and he will make straight your paths. - Proverbs 3:5-6",
                    "For I know the plans I have for you, declares the LORD, plans for welfare and not for evil, to give you a future and a hope. - Jeremiah 29:11",
                    "And we know that for those who love God all things work together for good, for those who are called according to his purpose. - Romans 8:28",
                    "Fear not, for I am with you; be not dismayed, for I am your God; I will strengthen you, I will help you, I will uphold you with my righteous right hand. - Isaiah 41:10",
                    "The LORD is my shepherd; I shall not want. - Psalm 23:1",
                    "The steadfast love of the LORD never ceases; his mercies never come to an end; they are new every morning; great is your faithfulness. - Lamentations 3:22-23",
                    "But they who wait for the LORD shall renew their strength; they shall mount up with wings like eagles; they shall run and not be weary; they shall walk and not faint. - Isaiah 40:31",
                    "Have I not commanded you? Be strong and courageous. Do not be frightened, and do not be dismayed, for the LORD your God is with you wherever you go. - Joshua 1:9"
                    // Add more verses if desired
                ];
                let currentVerseSlideIndex = 0;
                let activeSlide = null;

                function createVerseSlide(verseText) {
                    const slide = document.createElement('div');
                    slide.classList.add('verse-slide');
                    const parts = verseText.split(' - ');
                    const text = parts[0];
                    const reference = parts.length > 1 ? parts[1] : '';
                    slide.innerHTML = `<p class="text-gray-100">${text}</p><p class="text-sm text-sky-300 mt-2 font-semibold">- ${reference}</p>`;
                    return slide;
                }

                function showNextBibleVerseSlide() {
                    if (bibleVersesContent.length === 0) return;
                    const nextSlide = createVerseSlide(bibleVersesContent[currentVerseSlideIndex]);
                    bibleVerseContainer.appendChild(nextSlide);
                    
                    gsap.set(nextSlide, { y: '100%', opacity: 0 }); 
                    gsap.to(nextSlide, { y: '0%', opacity: 1, duration: 0.9, ease: 'power3.out' });

                    if (activeSlide) {
                        gsap.to(activeSlide, { y: '-100%', opacity: 0, duration: 0.9, ease: 'power3.in', onComplete: () => {
                           if(activeSlide && activeSlide.parentNode) activeSlide.remove();
                        }});
                    }
                    
                    activeSlide = nextSlide;
                    currentVerseSlideIndex = (currentVerseSlideIndex + 1) % bibleVersesContent.length;
                }

                if (bibleVersesContent.length > 0) {
                    showNextBibleVerseSlide(); 
                    setInterval(showNextBibleVerseSlide, 8000); 
                } else {
                    bibleVerseContainer.innerHTML = '<p class="verse-slide text-gray-100">The Word of God is a lamp to our feet.</p>';
                }
            }

            const quoteElement = document.getElementById('inspirational-quote');
            const authorElement = document.getElementById('quote-author');
            const refreshQuoteBtn = document.getElementById('refreshQuoteBtn');

            async function fetchInspirationalQuote() {
                if (!quoteElement || !authorElement) return;
                quoteElement.textContent = `Fetching an uplifting thought...`;
                authorElement.textContent = "";
                try {
                    const response = await fetch('https://api.quotable.io/random?maxLength=150&tags=faith|hope|inspirational|wisdom|spirituality|life'); 
                    if (!response.ok) throw new Error('Failed to fetch quote');
                    const data = await response.json();
                    quoteElement.textContent = `"${data.content}"`;
                    authorElement.textContent = `- ${data.author}`;
                } catch (error) {
                    console.error("Error fetching quote:", error);
                    quoteElement.textContent = "May your path be illuminated by divine wisdom and your heart filled with enduring peace.";
                    authorElement.textContent = "- A Prayer for You";
                }
            }
            if(refreshQuoteBtn) {
                refreshQuoteBtn.addEventListener('click', fetchInspirationalQuote);
            }
            fetchInspirationalQuote(); 

            const weatherWidgetContainer = document.getElementById('weather-widget-container');
            const weatherElement = document.getElementById('weather-widget');
            const weatherApiKey = ""; // IMPORTANT: User needs to replace this with their OpenWeatherMap API key
            const kakamegaLat = 0.2827; 
            const kakamegaLon = 34.7519; 

            async function fetchWeather() {
                if (!weatherElement || !weatherWidgetContainer) return;
                if (!weatherApiKey) {
                    weatherElement.innerHTML = `<p class="text-sm text-gray-300">Weather information for Kakamega is currently unavailable. (API key configuration needed in script)</p>`;
                    return;
                }
                document.getElementById('weather-loading').style.display = 'block';
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${kakamegaLat}&lon=${kakamegaLon}&appid=${weatherApiKey}&units=metric`);
                    if (!response.ok) throw new Error(`Weather API request failed: ${response.statusText}`);
                    const data = await response.json();
                    
                    document.getElementById('weather-loading').style.display = 'none';
                    weatherElement.innerHTML = `
                        <div class="flex items-center justify-between mb-2">
                            <div>
                                <p class="text-4xl font-bold">${Math.round(data.main.temp)}°C</p>
                                <p class="text-md capitalize text-gray-200">${data.weather[0].description}</p>
                            </div>
                            <img src="https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png" alt="${data.weather[0].description}" class="w-20 h-20">
                        </div>
                        <p class="text-sm text-gray-300">Feels like: ${Math.round(data.main.feels_like)}°C  |  Humidity: ${data.main.humidity}%</p>
                    `;
                } catch (error) {
                    console.error("Error fetching weather:", error);
                    document.getElementById('weather-loading').style.display = 'none';
                    weatherElement.innerHTML = `<p class="text-sm text-gray-300">Could not load current weather data for Kakamega.</p>`;
                }
            }
            fetchWeather(); 

            async function callGeminiAPI(prompt, outputElementId, buttonElement, spinnerId) {
                const outputElement = document.getElementById(outputElementId);
                const spinner = spinnerId ? document.getElementById(spinnerId) : null;
                if (!outputElement) return;

                outputElement.innerHTML = `<p class="italic text-gray-400">Seeking divine wisdom... please wait.</p>`;
                if(buttonElement) buttonElement.disabled = true;
                if(spinner) spinner.classList.remove('d-none');

                if (!GEMINI_API_KEY || GEMINI_API_KEY === "YOUR_GEMINI_API_KEY_HERE" || GEMINI_API_KEY.length < 15) { // Basic check
                    outputElement.innerHTML = `<p class="text-red-400">AI Service Configuration Error: The Gemini API key is missing or invalid. Please contact the site administrator.</p>`;
                    if(buttonElement) buttonElement.disabled = false;
                    if(spinner) spinner.classList.add('d-none');
                    console.error("Gemini API Key is not configured.");
                    return;
                }

                try {
                    let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                    const payload = { contents: chatHistory };
                    // Using gemini-1.5-flash for potentially faster responses, can be changed to gemini-pro or other models
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GEMINI_API_KEY}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error("Gemini API Error Data:", errorData);
                        let errorMessage = `API request failed: ${response.status}.`;
                        if (errorData.error && errorData.error.message) {
                            errorMessage += ` ${errorData.error.message}`;
                        }
                        // Check for common API key issues
                        if (response.status === 400 && errorData.error && errorData.error.message.toLowerCase().includes("api key not valid")) {
                             errorMessage = "AI Service Error: The configured API key is not valid. Please check the key and its permissions.";
                        } else if (response.status === 403) {
                            errorMessage = "AI Service Error: Permission denied. The API key might lack necessary permissions for the Gemini API, or the API is not enabled in your Google Cloud project.";
                        } else if (response.status === 429) {
                            errorMessage = "AI Service Error: Quota exceeded. The API usage limit has been reached. Please try again later.";
                        }
                        throw new Error(errorMessage);
                    }
                    
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        let text = result.candidates[0].content.parts[0].text;
                        // Basic Markdown to HTML conversion
                        text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'); // Bold
                        text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');       // Italic
                        text = text.replace(/^### (.*$)/gim, '<h3>$1</h3>'); // H3
                        text = text.replace(/^## (.*$)/gim, '<h2>$1</h2>');   // H2
                        text = text.replace(/^# (.*$)/gim, '<h1>$1</h1>');    // H1
                        text = text.replace(/^\s*-\s+(.*)/gim, '<li class="mb-1">$1</li>'); // List items
                        text = text.replace(/(\<li.*?\<\/li\>)+/gim, '<ul>$&</ul>'); // Wrap LIs in ULs
                        text = text.replace(/\n/g, '<br>'); // Newlines to <br> (after list processing)
                        // Clean up potential double <br> from list processing
                        text = text.replace(/<br\s*\/?>\s*<ul>/gi, '<ul>');
                        text = text.replace(/<\/ul>\s*<br\s*\/?>/gi, '</ul>');
                        
                        outputElement.innerHTML = `<div class="prose prose-lg max-w-none text-gray-200">${text}</div>`;
                    } else if (result.candidates && result.candidates[0] && result.candidates[0].finishReason) {
                        // Handle safety blocks or other finish reasons
                        let reasonMessage = `Response generation stopped. Reason: ${result.candidates[0].finishReason}.`;
                        if(result.candidates[0].safetyRatings) {
                            reasonMessage += ` Safety ratings: ${JSON.stringify(result.candidates[0].safetyRatings)}`;
                        }
                        outputElement.innerHTML = `<p class="text-yellow-400">${reasonMessage} Please try rephrasing your request.</p>`;
                    }
                    else {
                        outputElement.innerHTML = `<p class="text-red-400">Apologies, a response could not be fully formed at this moment. Please try again with reverence.</p>`;
                    }
                } catch (error) {
                    console.error("Error with AI tool:", error);
                    outputElement.innerHTML = `<p class="text-red-400">An unexpected error occurred: ${error.message}. We seek your patience.</p>`;
                } finally {
                    if(buttonElement) buttonElement.disabled = false;
                    if(spinner) spinner.classList.add('d-none');
                }
            }
            
            document.getElementById('sermonTopicsBtn')?.addEventListener('click', () => {
                const keywords = document.getElementById('sermonTopicsInput').value.trim();
                if (!keywords) {
                    document.getElementById('sermonTopicsOutput').innerHTML = `<p class="text-yellow-400 italic">Kindly offer some keywords to inspire the Spirit.</p>`;
                    return;
                }
                const prompt = `As a wise spiritual guide, suggest 5-7 distinct and profound sermon topics based on these keywords: "${keywords}". Frame them as inspiring titles. Present them as a bulleted list (e.g., - The Unfailing Light of Hope). Keep descriptions brief if any.`;
                callGeminiAPI(prompt, 'sermonTopicsOutput', document.getElementById('sermonTopicsBtn'), 'sermonTopicsSpinner');
            });

            document.getElementById('bibleAnswerBtn')?.addEventListener('click', () => {
                const question = document.getElementById('bibleAnswerInput').value.trim();
                if (!question) {
                    document.getElementById('bibleAnswerOutput').innerHTML = `<p class="text-yellow-400 italic">Please present your question to the Word.</p>`;
                    return;
                }
                const prompt = `As a knowledgeable Bible scholar, answer the following Bible-related question with clarity, depth, and humility, citing scripture references (e.g., John 3:16 KJV) where appropriate: "${question}" Keep the answer concise yet informative, around 150-250 words.`;
                callGeminiAPI(prompt, 'bibleAnswerOutput', document.getElementById('bibleAnswerBtn'), 'bibleAnswerSpinner');
            });
            
            document.getElementById('prayerBtn')?.addEventListener('click', () => { 
                const request = document.getElementById('prayerInput').value.trim(); 
                if (!request) {
                    document.getElementById('prayerOutput').innerHTML = `<p class="text-yellow-400 italic">Share your heart's desire for prayer.</p>`;
                    return;
                }
                const prompt = `As a compassionate prayer intercessor, craft a heartfelt, personalized Christian prayer (around 100-150 words) filled with faith and hope, based on the following need or situation: "${request}". Conclude with "In Jesus' Mighty Name, Amen."`;
                callGeminiAPI(prompt, 'prayerOutput', document.getElementById('prayerBtn'), 'prayerSpinner');
            });

            // New AI Tool: Bible Story Weaver
            document.getElementById('storyGenBtn')?.addEventListener('click', () => {
                const userInput = document.getElementById('storyGenInput').value.trim();
                if (!userInput) {
                    document.getElementById('storyGenOutput').innerHTML = `<p class="text-yellow-400 italic">Please provide a theme or character(s) to weave a story.</p>`;
                    return;
                }
                const prompt = `As a creative Christian storyteller, write a short, original story (around 200-250 words) inspired by the Bible's style and themes, based on the input: '${userInput}'. The story should be uplifting, carry a moral or lesson, and be suitable for all ages. Conclude with a short reflective thought or question related to the story's message. Use simple language.`;
                callGeminiAPI(prompt, 'storyGenOutput', document.getElementById('storyGenBtn'), 'storyGenSpinner');
            });

            // New AI Tool: Study Igniter
            document.getElementById('discussionStarterBtn')?.addEventListener('click', () => {
                const passage = document.getElementById('discussionStarterInput').value.trim();
                if (!passage) {
                    document.getElementById('discussionStarterOutput').innerHTML = `<p class="text-yellow-400 italic">Please enter a Bible passage to spark discussion.</p>`;
                    return;
                }
                const prompt = `As an insightful Bible study facilitator, generate 3-4 engaging and thought-provoking discussion questions for a small group studying the Bible passage: '${passage}'. The questions should encourage personal reflection, practical application, and deeper understanding of the text's meaning and relevance. Present them as a numbered list.`;
                callGeminiAPI(prompt, 'discussionStarterOutput', document.getElementById('discussionStarterBtn'), 'discussionStarterSpinner');
            });
            
            const generateDevotionBtnModal = document.getElementById('generateDevotionBtnModal');
            const devotionThemeInput = document.getElementById('devotionTheme');
            const devotionResultEl = document.getElementById('devotionResult');
            const devotionSpinnerModal = document.getElementById('devotionSpinnerModal');
            const devotionBtnTextModal = document.getElementById('devotionBtnTextModal');

            if (generateDevotionBtnModal) {
                generateDevotionBtnModal.addEventListener('click', async () => {
                    const theme = devotionThemeInput.value.trim();
                    let prompt = "As a source of spiritual encouragement, write a short, uplifting, and profound Christian devotion (around 180-220 words).";
                    if (theme) {
                        prompt += ` The devotion should be inspired by the theme of "${theme}".`;
                    }
                    prompt += " Conclude the devotion by suggesting a relevant Bible scripture (e.g., John 3:16 KJV). Format the scripture suggestion clearly like 'Scripture for Meditation: Verse Reference'. The devotion should be warm, personal, and easy to understand.";

                    devotionResultEl.innerHTML = `<p class="text-gray-500 italic">Seeking divine inspiration for your devotion...</p>`;
                    if(devotionSpinnerModal) devotionSpinnerModal.classList.remove('d-none');
                    if(devotionBtnTextModal) devotionBtnTextModal.textContent = 'Crafting Devotion...';
                    generateDevotionBtnModal.disabled = true;

                    // Re-using callGeminiAPI for consistency
                    // Note: The formatting of the output will be handled by callGeminiAPI's markdown processing.
                    // We might need specific tweaks if the modal output requires different formatting than the main page AI tools.
                    // For now, let's assume the generic markdown is fine.

                    if (!GEMINI_API_KEY || GEMINI_API_KEY === "YOUR_GEMINI_API_KEY_HERE" || GEMINI_API_KEY.length < 15) {
                        devotionResultEl.innerHTML = `<p class="text-red-600">AI Service Configuration Error: API key is missing or invalid.</p>`;
                        if(devotionSpinnerModal) devotionSpinnerModal.classList.add('d-none');
                        if(devotionBtnTextModal) devotionBtnTextModal.textContent = 'Generate My Personal Devotion';
                        generateDevotionBtnModal.disabled = false;
                        return;
                    }
                    
                    try {
                        let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                        const payload = { contents: chatHistory };
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GEMINI_API_KEY}`;
                        
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            const errorData = await response.json();
                            let errorMessage = `Gemini API request failed: ${response.status}.`;
                             if (errorData.error && errorData.error.message) errorMessage += ` ${errorData.error.message}`;
                            throw new Error(errorMessage);
                        }
                        
                        const result = await response.json();

                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            let text = result.candidates[0].content.parts[0].text;
                            text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'); 
                            text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
                            text = text.replace(/\n\n/g, '<br><br>'); // Paragraphs
                            text = text.replace(/\n/g, '<br>'); // Single newlines
                            // Specific formatting for "Scripture for Meditation"
                            text = text.replace(/(Scripture for Meditation:.*)/gi, '<p class="mt-6 pt-4 border-t border-gray-300"><strong class="font-lora text-blue-700 text-xl">$1</strong></p>');
                            devotionResultEl.innerHTML = `<div class="prose prose-xl max-w-none text-gray-800">${text}</div>`;
                        } else if (result.candidates && result.candidates[0] && result.candidates[0].finishReason) {
                             devotionResultEl.innerHTML = `<p class="text-yellow-500">Response generation stopped. Reason: ${result.candidates[0].finishReason}. Please try rephrasing if needed.</p>`;
                        }
                        else {
                            devotionResultEl.innerHTML = `<p class="text-red-600">Regrettably, a devotion could not be generated at this moment. Please seek His presence and try again.</p>`;
                        }
                    } catch (error) {
                        console.error("Error generating devotion:", error);
                        devotionResultEl.innerHTML = `<p class="text-red-600">An unexpected error occurred: ${error.message}. We trust in God's understanding.</p>`;
                    } finally {
                        if(devotionSpinnerModal) devotionSpinnerModal.classList.add('d-none');
                        if(devotionBtnTextModal) devotionBtnTextModal.textContent = 'Generate My Personal Devotion';
                        generateDevotionBtnModal.disabled = false;
                    }
                });
            }

            function updateCountdown() {
                const countdownElement = document.getElementById('countdown-timer');
                if (!countdownElement) return;

                const now = new Date();
                let eventYear = now.getFullYear();
                let eventDate = new Date(eventYear, 11, 9, 0, 0, 0); 

                if (now.getTime() > eventDate.getTime()) { 
                    eventYear++;
                    eventDate = new Date(eventYear, 11, 9, 0, 0, 0);
                }

                const timeLeft = eventDate - now;

                if (timeLeft < 0) { 
                    document.getElementById('days').innerText = '00';
                    document.getElementById('hours').innerText = '00';
                    document.getElementById('minutes').innerText = '00';
                    document.getElementById('seconds').innerText = '00';
                    return;
                }

                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                document.getElementById('days').innerText = String(days).padStart(2, '0');
                document.getElementById('hours').innerText = String(hours).padStart(2, '0');
                document.getElementById('minutes').innerText = String(minutes).padStart(2, '0');
                document.getElementById('seconds').innerText = String(seconds).padStart(2, '0');
            }
            if (document.getElementById('countdown-timer')) {
                updateCountdown(); 
                setInterval(updateCountdown, 1000); 
            }

            document.getElementById('currentYear').textContent = new Date().getFullYear();

            const navLinks = document.querySelectorAll('#navbarNav .nav-link');
            const currentPath = window.location.pathname.split("/").pop() || "index.html";
            navLinks.forEach(link => {
                const linkPath = (link.getAttribute('href') || "").split("/").pop() || "index.html";
                link.classList.remove('active-nav-link'); 
                if (linkPath === currentPath) {
                    link.classList.add('active-nav-link');
                }
            });
            if (currentPath === "index.html" || currentPath === "") {
                 const homeLink = document.querySelector('#navbarNav .nav-link[href="index.html"]');
                 if(homeLink && !homeLink.classList.contains('active-nav-link')) homeLink.classList.add('active-nav-link');
            }

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href.length > 1 && href !== "#" && document.querySelector(href)) { 
                        e.preventDefault();
                        const targetElement = document.querySelector(href);
                        const navbarHeight = document.getElementById('main-navbar')?.offsetHeight || 70; 
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - navbarHeight - 20; 

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });
    </script>

</body>
</html>